<div class="product-card" [ngClass]="view" (click)="onProductClick($event)">
  <div class="top-bar">
    <div class="actions">
      <span (click)="toggleFavorite($event)" [class.active]="product.isFavorite">‚ù§</span>
      <span *ngIf="showCompare" (click)="toggleCompare($event)" [class.active]="product.compare">‚áÑ</span>
    </div>
  </div>

  <div class="image-wrapper">
    <img *ngIf="product.imageLinks" [src]="
        product.imageLinks[0] || 'assets/images/no-image.png'
          | cleanStringLink
      " alt="{{ product.fullName }}" />
    <img *ngIf="product.productImageLinks" [src]="
        product.productImageLinks[0] || 'assets/images/no-image.png'
          | cleanStringLink
      " alt="{{ product.fullName }}" />

    <button class="quick-view" *ngIf="hovered" (click)="openQuickView()">üëÅ –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä</button>
  </div>

  <div class="content">
    <span id="article">–∞—Ä—Ç–∏–∫—É–ª: {{ product.article }}</span>
    <h4>{{ product.fullName }}</h4>
    <!-- –í–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–æ–≥–æ price-units-block -->
    <div class="price-display-block" *ngIf="getPrice(city$ | async)">
      <!-- –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ –∏ —Å–∫–∏–¥–∫–∞ -->
      <span class="old-price" *ngIf="product.oldPrice">
        {{ product.oldPrice }} ‚ÇΩ
      </span>
      <div class="discount-badge" *ngIf="product.oldPrice">
        -{{ (1 - getPrice(city$ | async) / product.oldPrice) * 100 | number:'1.0-0' }}%
      </div>

      <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–Ω–∞ -->
      <div class="main-unit-price">
        <div class="unit-label">
          <span class="unit-title">–£–ø–∞–∫–æ–≤–∫–∞</span>
          <span class="unit-details" *ngIf="product.packCount">
            {{ product.packCount }} —à—Ç
          </span>
        </div>
        <span class="unit-value">
          {{ getPrice(city$ | async) | number:'1.0-0' }}
        </span>
      </div>

      <!-- –í—Ç–æ—Ä–∏—á–Ω—ã–µ —Ü–µ–Ω—ã -->
      <div class="secondary-units">
        <div class="unit-chip highlight" *ngIf="product.packCount">
          <span class="chip-label">–ó–∞ 1 —à—Ç—É–∫—É</span>
          <span class="chip-value">
            {{ (getPrice(city$ | async) / product.packCount) | number:'1.0-1' }}
          </span>
        </div>

        <div class="unit-chip" *ngIf="product.boxCount && product.packCount">
          <span class="chip-label">–ö–æ—Ä–æ–±–∫–∞</span>
          <span class="chip-value">
            {{ (getPrice(city$ | async) * product.boxCount) | number:'1.0-0' }}
          </span>
          <span class="chip-details">
            {{ product.boxCount }} —É–ø √ó {{ product.packCount }} —à—Ç
          </span>
        </div>
      </div>
    </div>

    <div class="cart-control-section">
      <!-- –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä –µ—Å—Ç—å –≤ –æ–¥–Ω–æ–π –∏–∑ –∫–æ—Ä–∑–∏–Ω -->
      <div *ngIf="hasProductInBaskets()" class="active-basket-controls">
        <div class="add-cart-wrapper">
          <div class="quantity-selector">
            <button class="add-cart" (click)="addToActiveBasket()">–í –∫–æ—Ä–∑–∏–Ω–µ</button>
            <div class="quantity-controls" *ngIf="isInActiveBasket()">
              <button class="quantity-btn" (click)="updateActiveBasketQty(-1)">‚àí</button>
              <input class="input-quantity" type="number" [value]="getActiveBasketCount()" min="1"
                (change)="updateActiveBasketQtyFromInput($event)" />
              <button class="quantity-btn" (click)="updateActiveBasketQty(1)">+</button>
            </div>
          </div>

          <button class="cart-arrow" *ngIf="baskets?.length" (click)="toggleBasketPopup($event)">
            <span class="arrow-icon"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                <linearGradient id="GradientSwatch" gradientUnits="userSpaceOnUse" x1="2" x2="14" y1="3" y2="13">
                  <stop offset="0" stop-color="#87f1fc"></stop>
                  <stop offset="0.2557" stop-color="#7fd4fb"></stop>
                  <stop offset="0.5295" stop-color="#78bcfb"></stop>
                  <stop offset="0.7844" stop-color="#74aefa"></stop>
                  <stop offset="1" stop-color="#73a9fa"></stop>
                </linearGradient>
                <path
                  d="M12.5 2.5H10c0 0.1-0.1 0.3-0.2 0.4-0.2 0.3-0.5 0.6-0.9 0.7-0.2 0.1-0.4 0.1-0.6 0.1H7.7c-0.2 0-0.4 0-0.6-0.1-0.4-0.1-0.7-0.4-0.9-0.7-0.1-0.1-0.2-0.3-0.2-0.4H3.5C2.7 2.5 2 3.2 2 4v9c0 0.8 0.7 1.5 1.5 1.5h9c0.8 0 1.5-0.7 1.5-1.5V4c0-0.8-0.7-1.5-1.5-1.5zM11 12H5c-0.3 0-0.5-0.2-0.5-0.5s0.2-0.5 0.5-0.5h6c0.3 0 0.5 0.2 0.5 0.5S11.3 12 11 12zM11 9H5c-0.3 0-0.5-0.2-0.5-0.5S4.7 8 5 8h6c0.3 0 0.5 0.2 0.5 0.5S11.3 9 11 9zM11 6H5C4.7 6 4.5 5.8 4.5 5.5S4.7 5 5 5h6c0.3 0 0.5 0.2 0.5 0.5S11.3 6 11 6zM9 3.5c0 0.3-0.2 0.5-0.5 0.5h-3C5.2 4 5 3.8 5 3.5S5.2 3 5.5 3h3c0.3 0 0.5 0.2 0.5 0.5z"
                  fill="url(#GradientSwatch)" style="fill: rgb(50, 113, 32);"></path>
                <circle cx="12.5" cy="4.5" r="1" fill="url(#GradientSwatch)" opacity="0.8"></circle>
              </svg></span>
            <span class="basket-badge" *ngIf="getProductBaskets().length > 0">
              {{ getProductBaskets().length }}
            </span>
          </button>
        </div>
      </div>

      <!-- –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç –Ω–∏ –≤ –æ–¥–Ω–æ–π –∫–æ—Ä–∑–∏–Ω–µ -->
      <div *ngIf="!hasProductInBaskets()" class="add-to-cart-section">
        <div class="add-cart-wrapper">
          <div class="quantity-selector" *ngIf="quantitySelectorVisible">
            <div class="quantity-controls">
              <button class="quantity-btn" (click)="decreaseQty()">‚àí</button>
              <input class="input-quantity" type="number" [(ngModel)]="selectedQuantity" min="1" />
              <button class="quantity-btn" (click)="increaseQty()">+</button>
            </div>
          </div>

          <button *ngIf="!quantitySelectorVisible" class="add-cart" (click)="addOneToCart()">
            –í –∫–æ—Ä–∑–∏–Ω—É
          </button>
          <button class="cart-arrow" *ngIf="baskets?.length" (click)="toggleBasketPopup($event)">
            <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
              <linearGradient id="GradientSwatch" gradientUnits="userSpaceOnUse" x1="2" x2="14" y1="3" y2="13">
                <stop offset="0" stop-color="#87f1fc"></stop>
                <stop offset="0.2557" stop-color="#7fd4fb"></stop>
                <stop offset="0.5295" stop-color="#78bcfb"></stop>
                <stop offset="0.7844" stop-color="#74aefa"></stop>
                <stop offset="1" stop-color="#73a9fa"></stop>
              </linearGradient>
              <path
                d="M12.5 2.5H10c0 0.1-0.1 0.3-0.2 0.4-0.2 0.3-0.5 0.6-0.9 0.7-0.2 0.1-0.4 0.1-0.6 0.1H7.7c-0.2 0-0.4 0-0.6-0.1-0.4-0.1-0.7-0.4-0.9-0.7-0.1-0.1-0.2-0.3-0.2-0.4H3.5C2.7 2.5 2 3.2 2 4v9c0 0.8 0.7 1.5 1.5 1.5h9c0.8 0 1.5-0.7 1.5-1.5V4c0-0.8-0.7-1.5-1.5-1.5zM11 12H5c-0.3 0-0.5-0.2-0.5-0.5s0.2-0.5 0.5-0.5h6c0.3 0 0.5 0.2 0.5 0.5S11.3 12 11 12zM11 9H5c-0.3 0-0.5-0.2-0.5-0.5S4.7 8 5 8h6c0.3 0 0.5 0.2 0.5 0.5S11.3 9 11 9zM11 6H5C4.7 6 4.5 5.8 4.5 5.5S4.7 5 5 5h6c0.3 0 0.5 0.2 0.5 0.5S11.3 6 11 6zM9 3.5c0 0.3-0.2 0.5-0.5 0.5h-3C5.2 4 5 3.8 5 3.5S5.2 3 5.5 3h3c0.3 0 0.5 0.2 0.5 0.5z"
                fill="url(#GradientSwatch)" style="fill: rgb(50, 113, 32);"></path>
              <circle cx="12.5" cy="4.5" r="1" fill="url(#GradientSwatch)" opacity="0.8"></circle>
            </svg>

            <span class="basket-badge" *ngIf="getProductBaskets().length > 0">
              {{ getProductBaskets().length }}
            </span>
          </button>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞ -->
<div class="quick-view-modal" *ngIf="showQuickView">
  <div class="overlay" (click)="closeQuickView()"></div>

  <div class="modal-content">
    <button class="close" (click)="closeQuickView()">‚úñ</button>

    <div class="modal-body">
      <div class="product-left">
        <img [src]="product.productImageLinks[0] || 'assets/images/no-image.png'" alt="{{ product.fullName }}" />
      </div>

      <div class="product-right">
        <h3>{{ product.fullName }}</h3>
        <span class="product-id">–ê—Ä—Ç–∏–∫—É–ª: {{ product.article }}</span>

        <p class="description">{{ product.description }}</p>

        <!-- –ë–ª–æ–∫ —Ü–µ–Ω –≤ –º–æ–¥–∞–ª–∫–µ -->
        <div class="price-units-block-modal">
          <div class="price-unit-main">
            <div class="unit-price-large">
              <span class="unit-type">–£–ø–∞–∫–æ–≤–∫–∞:</span>
              <span class="unit-value-large">{{ getPrice(city$ | async) | number:'1.0-0' }} ‚ÇΩ</span>
              <span *ngIf="product.packCount" class="unit-count">({{ product.packCount }} —à—Ç.)</span>
            </div>
            <div class="unit-prices-list">
              <div class="unit-price-item" *ngIf="product.packCount">
                <span class="item-label">–ó–∞ —à—Ç—É–∫—É:</span>
                <span class="item-value">{{ (getPrice(city$ | async) / product.packCount) | number:'1.0-1' }} ‚ÇΩ</span>
              </div>
              <div class="unit-price-item" *ngIf="product.boxCount && product.packCount">
                <span class="item-label">–ö–æ—Ä–æ–±–∫–∞ ({{ product.boxCount }} —É–ø.):</span>
                <span class="item-value">{{ (getPrice(city$ | async) * product.boxCount) | number:'1.0-0' }} ‚ÇΩ</span>
              </div>
            </div>
          </div>

          <div class="old-price-discount-modal" *ngIf="product.oldPrice">
            <span class="old-price-modal">{{ product.oldPrice }} ‚ÇΩ</span>
            <span class="discount-modal">
              -{{ (1 - getPrice(city$ | async) / product.oldPrice) * 100 | number:'1.0-0' }}%
            </span>
          </div>
        </div>

        <div class="extra-info-modal">
          <div class="info-row" *ngIf="product.remains.length > 0">
            <span class="info-label">–í –Ω–∞–ª–∏—á–∏–∏:</span>
            <span class="info-value">{{ product.remains[0].quantity }} —É–ø.</span>
          </div>
          <div class="info-row" *ngIf="product.packCount">
            <span class="info-label">–í —É–ø–∞–∫–æ–≤–∫–µ:</span>
            <span class="info-value">{{ product.packCount }} —à—Ç.</span>
          </div>
          <div class="info-row" *ngIf="product.boxCount">
            <span class="info-label">–í –∫–æ—Ä–æ–±–∫–µ:</span>
            <span class="info-value">{{ product.boxCount }} —É–ø.</span>
          </div>
          <div class="info-row" *ngIf="product.grossWeight">
            <span class="info-label">–í–µ—Å:</span>
            <span class="info-value">{{ product.grossWeight }} –≥</span>
          </div>
          <div class="info-row" *ngIf="product.height && product.width && product.depth">
            <span class="info-label">–†–∞–∑–º–µ—Ä:</span>
            <span class="info-value">{{ product.width }}√ó{{ product.height }}√ó{{ product.depth }} –º–º</span>
          </div>
        </div>

        <!-- –ö–æ–Ω—Ç—Ä–æ–ª—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
        <div class="cart-control-modal">
          <div *ngIf="isInActiveBasket()" class="active-basket-controls">
            <div class="quantity-selector">
              <div class="quantity-controls">
                <button class="quantity-btn" (click)="updateActiveBasketQty(-1)">‚àí</button>
                <input class="input-quantity" type="number" [value]="getActiveBasketCount()" min="1"
                  (change)="updateActiveBasketQtyFromInput($event)" />
                <button class="quantity-btn" (click)="updateActiveBasketQty(1)">+</button>
              </div>
            </div>
          </div>

          <div *ngIf="!isInActiveBasket()">
            <div class="quantity-selector">
              <button class="quantity-btn" (click)="decreaseQty()">‚àí</button>
              <input type="number" [(ngModel)]="selectedQuantity" min="1" />
              <button class="quantity-btn" (click)="increaseQty()">+</button>
            </div>

            <button class="add-cart" (click)="addToActiveBasket()">–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–∫—Ç–∏–≤–Ω—É—é –∫–æ—Ä–∑–∏–Ω—É</button>
          </div>
        </div>

        <div class="total-price" *ngIf="isInActiveBasket()">
          –û–±—â–∞—è —Å—É–º–º–∞: {{ getActiveBasketTotal() }} ‚ÇΩ
        </div>
        <div class="total-price" *ngIf="!isInActiveBasket()">
          –û–±—â–∞—è —Å—É–º–º–∞: {{ getTotalPrice(city$ | async) }} ‚ÇΩ
        </div>
      </div>
    </div>
  </div>
</div>






<!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ -->
<div class="modal-overlay" *ngIf="showBasketPopup" (click)="closeBasketPopup()">
  <div class="basket-modal" (click)="$event.stopPropagation()">

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º –∏ –¥–µ–∫–æ—Ä–æ–º -->
    <div class="modal-header">
      <div class="header-content">
        <svg class="header-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M5 7H19L18 16H6L5 7Z" stroke="#327120" stroke-width="1.5" stroke-linecap="round"
            stroke-linejoin="round" />
          <circle cx="8" cy="20" r="1.5" stroke="#327120" stroke-width="1.5" />
          <circle cx="16" cy="20" r="1.5" stroke="#327120" stroke-width="1.5" />
          <path d="M8 12H16" stroke="#327120" stroke-width="1.5" stroke-linecap="round" />
          <path d="M9 4L7 7" stroke="#327120" stroke-width="1.5" stroke-linecap="round" />
          <path d="M15 4L17 7" stroke="#327120" stroke-width="1.5" stroke-linecap="round" />
        </svg>
        <h3>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ä–∑–∏–Ω—É</h3>
      </div>
      <button class="close-btn" (click)="closeBasketPopup()">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path d="M1 1L13 13M1 13L13 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
        </svg>
      </button>
    </div>

    <!-- –ü–æ–∏—Å–∫ —Å –∏–∫–æ–Ω–∫–æ–π -->
    <div class="search-box" *ngIf="baskets?.length > 5">
      <div class="search-wrapper">
        <svg class="search-icon" width="18" height="18" viewBox="0 0 18 18" fill="none">
          <circle cx="8" cy="8" r="6" stroke="#327120" stroke-width="1.5" />
          <path d="M12 12L16 16" stroke="#327120" stroke-width="1.5" stroke-linecap="round" />
        </svg>
        <input type="text" placeholder="–ü–æ–∏—Å–∫ –∫–æ—Ä–∑–∏–Ω—ã..." (input)="filterBaskets($event)" class="search-input">
      </div>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∑–∏–Ω -->
    <div class="baskets-list" *ngIf="filteredBaskets?.length; else noBaskets">
      <div class="basket-card" *ngFor="let basket of filteredBaskets" (click)="selectBasket(basket)"
        [class.active]="selectedBasketId === basket.id">
        <div class="basket-icon">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
            <rect x="4" y="8" width="24" height="18" rx="3" stroke="currentColor" stroke-width="1.5" />
            <path d="M8 8L10 4H22L24 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
            <circle cx="12" cy="16" r="2" fill="currentColor" fill-opacity="0.2" stroke="currentColor"
              stroke-width="1.5" />
            <circle cx="20" cy="16" r="2" fill="currentColor" fill-opacity="0.2" stroke="currentColor"
              stroke-width="1.5" />
          </svg>
          <span class="badge" *ngIf="basket.productCount">{{ basket.productCount }}</span>
        </div>

        <div class="basket-info">
          <div class="basket-name">{{ basket.name }}</div>
          <div class="basket-meta">
            <span class="product-count">{{ basket.productCount || 0 }} —Ç–æ–≤–∞—Ä–æ–≤</span>
            <span class="status-badge" [class.active]="basket.isActiveBasket">
              {{ basket.isActiveBasket ? '–ê–∫—Ç–∏–≤–Ω–∞' : '–ù–µ–∞–∫—Ç–∏–≤–Ω–∞' }}
            </span>
          </div>
        </div>

        <button class="details-btn" (click)="showBasketDetails($event, basket)" title="–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –∫–æ—Ä–∑–∏–Ω–µ">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <circle cx="10" cy="5" r="1.5" fill="currentColor" />
            <circle cx="10" cy="10" r="1.5" fill="currentColor" />
            <circle cx="10" cy="15" r="1.5" fill="currentColor" />
          </svg>
        </button>
      </div>
    </div>

    <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
    <ng-template #noBaskets>
      <div class="empty-state">
        <svg class="empty-icon" width="64" height="64" viewBox="0 0 64 64" fill="none">
          <circle cx="32" cy="32" r="24" stroke="#327120" stroke-width="1.5" stroke-dasharray="4 4" />
          <path d="M20 24L28 32L20 40" stroke="#327120" stroke-width="1.5" stroke-linecap="round" />
          <path d="M44 24L36 32L44 40" stroke="#327120" stroke-width="1.5" stroke-linecap="round" />
          <rect x="24" y="18" width="16" height="28" rx="4" stroke="#327120" stroke-width="1.5" />
        </svg>
        <div class="empty-text">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ—Ä–∑–∏–Ω</div>
        <button class="create-btn" (click)="createNewBasket()">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" style="margin-right: 8px;">
            <path d="M9 3V15M3 9H15" stroke="white" stroke-width="1.5" stroke-linecap="round" />
          </svg>
          –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–∑–∏–Ω—É
        </button>
      </div>
    </ng-template>

    <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π -->
    <div class="help-tip">
      <svg class="tip-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
        <circle cx="10" cy="10" r="8" stroke="#327120" stroke-width="1.5" />
        <path d="M8 8H10V14" stroke="#327120" stroke-width="1.5" stroke-linecap="round" />
        <circle cx="10" cy="6" r="0.75" fill="#327120" />
      </svg>
      <span class="tip-text">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–æ—Ä–∑–∏–Ω—É, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</span>
    </div>
  </div>
</div>

<!-- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–æ–ø–∞–ø –∫–æ—Ä–∑–∏–Ω—ã -->
<div class="modal-overlay" *ngIf="showBasketDetailPopup" (click)="hideBasketDetails()">
  <div class="basket-details-modal" (click)="$event.stopPropagation()">

    <div class="modal-header">
      <div class="header-content">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <rect x="3" y="5" width="18" height="14" rx="2" stroke="#327120" stroke-width="1.5" />
          <path d="M7 5V3H17V5" stroke="#327120" stroke-width="1.5" stroke-linecap="round" />
          <circle cx="8" cy="11" r="1" fill="#327120" fill-opacity="0.3" />
          <circle cx="16" cy="11" r="1" fill="#327120" fill-opacity="0.3" />
        </svg>
        <h3>–î–µ—Ç–∞–ª–∏ –∫–æ—Ä–∑–∏–Ω—ã</h3>
      </div>
      <button class="close-btn" (click)="hideBasketDetails()">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path d="M1 1L13 13M1 13L13 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
        </svg>
      </button>
    </div>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º —Ç–æ–≤–∞—Ä–µ -->
    <div class="product-info" *ngIf="currentProduct">
      <div class="product-image">
        <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
          <rect x="5" y="5" width="30" height="30" rx="4" fill="white" stroke="#327120" stroke-width="1.5" />
          <circle cx="20" cy="20" r="6" stroke="#327120" stroke-width="1.5" stroke-dasharray="3 3" />
        </svg>
      </div>
      <div class="product-details">
        <div class="product-name">{{ currentProduct.name || '–¢–æ–≤–∞—Ä' }}</div>
        <div class="product-price">{{ currentProduct.price || 0 }} ‚ÇΩ</div>
      </div>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∑–∏–Ω —Å —Ç–æ–≤–∞—Ä–æ–º -->
    <div class="basket-details-list">
      <div *ngFor="let basketItem of getProductBaskets()" class="basket-detail-card">
        <div class="basket-info">
          <div class="basket-name">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" style="margin-right: 6px;">
              <rect x="2" y="4" width="12" height="9" rx="1.5" stroke="#327120" stroke-width="1.2" />
              <path d="M4 4L5 2H11L12 4" stroke="#327120" stroke-width="1.2" />
            </svg>
            {{ getBasketName(basketItem.userBasketId) }}
          </div>
          <div class="basket-stats">
            <span class="count">{{ basketItem.count }} —à—Ç.</span>
            <span class="total">{{ basketItem.totalCost }} ‚ÇΩ</span>
          </div>
        </div>

        <div class="action-buttons">
          <button class="action-btn minus" (click)="updateBasketItem(basketItem, -1)" [disabled]="basketItem.count <= 1"
            title="–£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M3 8H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
            </svg>
          </button>

          <span class="count-badge">{{ basketItem.count }}</span>

          <button class="action-btn plus" (click)="updateBasketItem(basketItem, 1)" title="–£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
            </svg>
          </button>

          <button class="action-btn remove" (click)="removeFromSpecificBasket(basketItem)" title="–£–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <rect x="3" y="5" width="10" height="9" rx="1.5" stroke="currentColor" stroke-width="1.2" />
              <path d="M5 5V3H11V5" stroke="currentColor" stroke-width="1.2" />
              <path d="M6 8L10 12M10 8L6 12" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –ø—É–ª—å—Å–∞—Ü–∏–∏ -->
    <div class="help-tip pulse">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
        <path d="M10 4V10L13 13" stroke="#327120" stroke-width="1.5" stroke-linecap="round" />
        <circle cx="10" cy="14" r="1" fill="#327120" />
      </svg>
      <span class="tip-text">–ö–Ω–æ–ø–∫–∞–º–∏ +/‚àí –º–µ–Ω—è–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞</span>
    </div>
  </div>
</div>