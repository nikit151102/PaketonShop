<div class="modern-dashboard">
  <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º -->
  <div class="dashboard-header">
    <div class="welcome-section">
      <div class="welcome-content">
        <h1 class="welcome-title">
          {{userLoading ? '–ó–∞–≥—Ä—É–∑–∫–∞...' : 
            userError ? '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏' : 
            '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + (user?.firstName || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å') + '!'}} üëã
        </h1>
        <p class="welcome-subtitle">–í–æ—Ç —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –≤–∞—à–∏–º–∏ –∑–∞–∫–∞–∑–∞–º–∏ —Å–µ–≥–æ–¥–Ω—è</p>
      </div>
      <div class="date-display">
        <div class="current-date">{{currentDate | date:'dd MMMM yyyy'}}</div>
        <div class="current-time">{{currentTime}}</div>
      </div>
    </div>
    
    <div class="header-actions">
      <div class="action-search">
        <input type="text" placeholder="–ü–æ–∏—Å–∫ –∑–∞–∫–∞–∑–æ–≤, —Ç–æ–≤–∞—Ä–æ–≤..." />
        <svg width="18" height="18" viewBox="0 0 24 24" fill="#327120">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
      </div>
      
      <div class="action-buttons">
        <button class="action-btn notification-btn" (click)="toggleNotifications()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 8c0-3.31-2.69-6-6-6S6 4.69 6 8c0 4.5 6 11 6 11s6-6.5 6-11z"/>
            <circle cx="18" cy="8" r="4" fill="#ef4444"/>
          </svg>
          <span class="notification-count" *ngIf="unreadNotifications > 0">
            {{unreadNotifications}}
          </span>
        </button>
        
        <button class="action-btn theme-toggle" (click)="toggleTheme()">
          <svg *ngIf="!isDarkTheme" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm4.95 3.05l2.83 2.83c-3.9 3.9-10.24 3.9-14.14 0l2.83-2.83c2.12 2.12 5.55 2.12 7.78 0z"/>
          </svg>
          <svg *ngIf="isDarkTheme" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/>
          </svg>
        </button>
        
        <div class="user-menu">
          <div class="user-avatar" (click)="toggleUserMenu()">
            {{getUserInitials()}}
          </div>
          <div class="user-menu-dropdown" [class.active]="showUserMenu">
            <a routerLink="/profile">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a>
            <a routerLink="/settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
            <a routerLink="/help">–ü–æ–º–æ—â—å</a>
            <div class="divider"></div>
            <a (click)="logout()" class="logout">–í—ã–π—Ç–∏</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞ -->
  <div class="dashboard-grid">
    <!-- –ö—Ä—É–ø–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="dashboard-card profile-card">
      <div class="card-header">
        <h2 class="card-title">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="#327120">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
          </svg>
          –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
        </h2>
        <button class="card-action" (click)="editProfile()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="#666">
            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
          </svg>
        </button>
      </div>
      
      <div class="profile-content">
        <div *ngIf="userLoading" class="loading-state">
          <div class="spinner"></div>
          <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è...</p>
        </div>
        
        <div *ngIf="userError" class="error-state">
          <p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è</p>
          <button (click)="loadUserData()">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
        </div>
        
        <div *ngIf="!userLoading && !userError && user" class="profile-data">
          <div class="profile-main">
            <div class="profile-avatar-large">
              {{getUserInitials()}}
            </div>
            <div class="profile-info">
              <h3 class="profile-name">{{user.firstName}} {{user.lastName}}</h3>
              <div class="profile-stats">
                <div class="stat-item">
                  <div class="stat-value">{{completedOrders}}</div>
                  <div class="stat-label">–ó–∞–∫–∞–∑–æ–≤</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value">{{daysWithUs}}</div>
                  <div class="stat-label">–î–Ω–µ–π —Å –Ω–∞–º–∏</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value">{{loyaltyLevel}}</div>
                  <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="profile-details">
            <div class="detail-item">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="#327120">
                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
              </svg>
              <span>{{user.email}}</span>
            </div>
            <div class="detail-item">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="#327120">
                <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
              </svg>
              <span>{{user.phoneNumber || '–¢–µ–ª–µ—Ñ–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω'}}</span>
            </div>
          </div>
          
          <div class="profile-progress">
            <div class="progress-info">
              <span>–ü—Ä–æ—Ñ–∏–ª—å –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ {{profileCompletion}}%</span>
              <span>{{profileCompletion}}%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" [style.width.%]="profileCompletion"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ -->
    <div class="dashboard-card orders-card">
      <div class="card-header">
        <h2 class="card-title">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="#327120">
            <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9z"/>
          </svg>
          –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã
        </h2>
        <a routerLink="/orders" class="view-all">–í—Å–µ –∑–∞–∫–∞–∑—ã ‚Üí</a>
      </div>
      
      <div class="orders-content">
        <div *ngIf="ordersLoading" class="loading-state">
          <div class="spinner"></div>
          <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤...</p>
        </div>
        
        <div *ngIf="!ordersLoading">
          <div class="orders-status">
            <div class="status-badge processing" [class.active]="activeTab === 'processing'">
              <span class="status-count">{{processingOrders}}</span>
              <span class="status-label">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</span>
            </div>
            <div class="status-badge shipping" [class.active]="activeTab === 'shipping'">
              <span class="status-count">{{shippingOrders}}</span>
              <span class="status-label">–î–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è</span>
            </div>
            <div class="status-badge delivered" [class.active]="activeTab === 'delivered'">
              <span class="status-count">{{deliveredOrders}}</span>
              <span class="status-label">–î–æ—Å—Ç–∞–≤–ª–µ–Ω—ã</span>
            </div>
          </div>
          
          <div class="active-orders">
            <div *ngIf="activeOrders.length === 0" class="empty-state">
              <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</p>
              <button class="btn-create-order" (click)="createOrder()">–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑</button>
            </div>
            
            <div class="order-item" *ngFor="let order of activeOrders">
              <div class="order-icon">
                <div class="icon-circle" [class]="order.status">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                    <path *ngIf="order.status === 'processing'" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
                    <path *ngIf="order.status === 'shipping'" d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"/>
                    <path *ngIf="order.status === 'delivered'" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                  </svg>
                </div>
              </div>
              <div class="order-info">
                <div class="order-id">–ó–∞–∫–∞–∑ #{{order.id}}</div>
                <div class="order-date">{{order.date}}</div>
              </div>
              <div class="order-amount">{{formatPrice(order.amount)}}</div>
              <div class="order-status-badge" [class]="order.status">
                {{order.statusText}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div class="dashboard-card stats-card">
      <div class="card-header">
        <h2 class="card-title">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="#327120">
            <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
          </svg>
          –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        </h2>
        <div class="period-selector">
          <select [(ngModel)]="selectedPeriod" (change)="updateStats()">
            <option value="week">–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
            <option value="month">–≠—Ç–æ—Ç –º–µ—Å—è—Ü</option>
            <option value="year">–≠—Ç–æ—Ç –≥–æ–¥</option>
          </select>
        </div>
      </div>
      
      <div class="stats-content">
        <div class="chart-container">
          <canvas #statsChart width="400" height="200"></canvas>
        </div>
        
        <div class="stats-numbers">
          <div class="stat-number">
            <div class="number-value">{{formatPrice(totalSpent)}}</div>
            <div class="number-label">–í—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ</div>
            <div class="number-change" [class.positive]="spendingChange >= 0">
              <svg [class.negative]="spendingChange < 0" width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
              </svg>
              {{spendingChange}}%
            </div>
          </div>
          
          <div class="stat-number">
            <div class="number-value">{{formatPrice(averageOrder)}}</div>
            <div class="number-label">–°—Ä–µ–¥–Ω–∏–π –∑–∞–∫–∞–∑</div>
          </div>
          
          <div class="stat-number">
            <div class="number-value">{{ordersCount}}</div>
            <div class="number-label">–ó–∞–∫–∞–∑–æ–≤ –≤—Å–µ–≥–æ</div>
          </div>
        </div>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ -->
    <div class="dashboard-card favorites-card">
      <div class="card-header">
        <h2 class="card-title">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="#327120">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
          </svg>
          –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
        </h2>
        <a routerLink="/favorites" class="view-all">–í—Å–µ ‚Üí</a>
      </div>
      
      <div class="favorites-content">
        <div *ngIf="favoritesLoading" class="loading-state">
          <div class="spinner"></div>
          <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ...</p>
        </div>
        
        <div *ngIf="!favoritesLoading">
          <div class="favorites-stats">
            <div class="favorite-stat">
              <div class="stat-value">{{favoritesCount}}</div>
              <div class="stat-label">–¢–æ–≤–∞—Ä–æ–≤</div>
            </div>
            <div class="favorite-stat">
              <div class="stat-value">{{favoritesCategories}}</div>
              <div class="stat-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–π</div>
            </div>
            <div class="favorite-stat">
              <div class="stat-value">{{favoritesUpdated}}</div>
              <div class="stat-label">–û–±–Ω–æ–≤–ª–µ–Ω–æ</div>
            </div>
          </div>
          
          <div class="favorites-items">
            <div *ngIf="favoriteItems.length === 0" class="empty-state">
              <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</p>
            </div>
            
            <div class="favorite-item" *ngFor="let item of favoriteItems">
              <div class="favorite-image">
                <img [src]="item.image" [alt]="item.name" />
                <div class="favorite-discount" *ngIf="item.discount">-{{item.discount}}%</div>
              </div>
              <div class="favorite-details">
                <div class="favorite-name">{{item.name}}</div>
                <div class="favorite-price">{{formatPrice(item.price)}}</div>
                <div class="favorite-status" [class.in-stock]="item.inStock" [class.out-of-stock]="!item.inStock">
                  {{item.inStock ? '–í –Ω–∞–ª–∏—á–∏–∏' : '–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏'}}
                </div>
              </div>
              <button class="favorite-action" (click)="removeFromFavorites(item.id)">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="#999">
                  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
              </button>
            </div>
          </div>
          
          <div class="favorites-actions">
            <button class="btn-add-favorite" (click)="browseFavorites()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="#327120">
                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
              </svg>
              –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä—ã
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–¥—Ä–µ—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ -->
    <div class="dashboard-card addresses-card">
      <div class="card-header">
        <h2 class="card-title">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="#327120">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
          </svg>
          –ú–æ–∏ –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
        </h2>
        <button class="card-action" (click)="addAddress()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="#327120">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
          </svg>
        </button>
      </div>
      
      <div class="addresses-content">
        <div *ngIf="addressesLoading" class="loading-state">
          <div class="spinner"></div>
          <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥—Ä–µ—Å–æ–≤...</p>
        </div>
        
        <div *ngIf="!addressesLoading">          
          <div class="address-list">
            <div class="address-header">–ú–æ–∏ –∞–¥—Ä–µ—Å–∞</div>
            <div class="address-items">
              <div *ngIf="personalAddresses.length === 0" class="empty-state">
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤</p>
              </div>
              
              <div class="address-item" *ngFor="let address of personalAddresses">
                <div class="address-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="#327120">
                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                  </svg>
                </div>
                <div class="address-details">
                  <div class="address-type">{{address.type}}</div>
                  <div class="address-text">{{address.address}}</div>
                  <div class="address-default" *ngIf="address.isDefault">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</div>
                </div>
                <div class="address-actions">
                  <button class="action-btn edit" (click)="editAddress(address)">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="#666">
                      <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–º–ø–∞–Ω–∏–π -->
    <div class="dashboard-card companies-card">
      <div class="card-header">
        <h2 class="card-title">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="#327120">
            <path d="M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"/>
          </svg>
          –ú–æ–∏ –∫–æ–º–ø–∞–Ω–∏–∏
        </h2>
        <button class="card-action" (click)="addCompany()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="#327120">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
          </svg>
        </button>
      </div>
      
      <div class="companies-content">
        <div *ngIf="companiesLoading" class="loading-state">
          <div class="spinner"></div>
          <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–∞–Ω–∏–π...</p>
        </div>
        
        <div *ngIf="!companiesLoading">
          <div class="companies-stats">
            <div class="company-stat">
              <div class="stat-value">{{companiesCount}}</div>
              <div class="stat-label">–ö–æ–º–ø–∞–Ω–∏–π</div>
            </div>
            <div class="company-stat">
              <div class="stat-value">{{activeContracts}}</div>
              <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤</div>
            </div>
            <div class="company-stat">
              <div class="stat-value">{{totalOrdersFromCompanies}}</div>
              <div class="stat-label">–ó–∞–∫–∞–∑–æ–≤ –≤—Å–µ–≥–æ</div>
            </div>
          </div>
          
          <div class="companies-list">
            <div *ngIf="companies.length === 0" class="empty-state">
              <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π</p>
            </div>
            
            <div class="company-item" *ngFor="let company of companies">
              <div class="company-logo">
                <span class="logo-text">{{company.name.substring(0, 2)}}</span>
              </div>
              <div class="company-details">
                <div class="company-name">{{company.name}}</div>
                <div class="company-info">
                  <span class="company-inn">–ò–ù–ù: {{company.inn}}</span>
                  <span class="company-type">{{company.type}}</span>
                </div>
                <div class="company-contracts">
                  <span class="contract-count">{{company.contracts}} –¥–æ–≥–æ–≤–æ—Ä–æ–≤</span>
                  <span class="company-status" [class.active]="company.active">
                    {{company.active ? '–ê–∫—Ç–∏–≤–Ω–∞' : '–ù–µ –∞–∫—Ç–∏–≤–Ω–∞'}}
                  </span>
                </div>
              </div>
              <div class="company-actions">
                <button class="action-btn view" (click)="viewCompany(company)">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="#666">
                    <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                  </svg>
                </button>
                <button class="action-btn edit" (click)="editCompany(company)">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="#666">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          
          <div class="companies-actions">
            <button class="btn-view-all" (click)="viewAllCompanies()">
              –í—Å–µ –∫–æ–º–ø–∞–Ω–∏–∏
            </button>
            <button class="btn-new-contract" (click)="createContract()">
              –ù–æ–≤—ã–π –¥–æ–≥–æ–≤–æ—Ä
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="dashboard-card actions-card">
      <div class="card-header">
        <h2 class="card-title">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="#327120">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
          </svg>
          –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
        </h2>
      </div>
      
      <div class="actions-grid">
        <button class="action-button primary" (click)="createOrder()">
          <div class="action-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
              <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0 0 20 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
            </svg>
          </div>
          <span>–ù–æ–≤—ã–π –∑–∞–∫–∞–∑</span>
        </button>
        
        <button class="action-button" (click)="contactSupport()">
          <div class="action-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#327120">
              <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"/>
            </svg>
          </div>
          <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
        </button>
        
        <button class="action-button" (click)="viewAddresses()">
          <div class="action-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#327120">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
          </div>
          <span>–ê–¥—Ä–µ—Å–∞</span>
        </button>
        
        <button class="action-button" (click)="viewFavorites()">
          <div class="action-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#327120">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
          </div>
          <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
        </button>
        
        <button class="action-button" (click)="downloadInvoices()">
          <div class="action-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#327120">
              <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
            </svg>
          </div>
          <span>–î–æ–∫—É–º–µ–Ω—Ç—ã</span>
        </button>
        
        <button class="action-button" (click)="viewCoupons()">
          <div class="action-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#327120">
              <path d="M20 12c0-1.1.9-2 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-1.99.9-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-4c-1.1 0-2-.9-2-2zm-4.42 4.8L12 14.5l-3.58 2.3 1.08-4.12-3.29-2.69 4.24-.25L12 5.8l1.54 3.95 4.24.25-3.29 2.69 1.09 4.11z"/>
            </svg>
          </div>
          <span>–ö—É–ø–æ–Ω—ã</span>
        </button>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π -->
    <div class="dashboard-card recommendations-card">
      <div class="card-header">
        <h2 class="card-title">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="#327120">
            <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
          </svg>
          –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≤–∞–º
        </h2>
        <a routerLink="/recommendations" class="refresh-btn" (click)="refreshRecommendations($event)">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="#327120">
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
          </svg>
        </a>
      </div>
      
      <div class="recommendations-slider">
        <div class="slider-container" #sliderContainer>
          <div class="slider-track" [style.transform]="'translateX(' + sliderOffset + 'px)'">
            <div class="recommendation-item" *ngFor="let item of recommendations">
              <div class="recommendation-image">
                <img [src]="item.image" [alt]="item.name" />
                <div class="recommendation-badge" *ngIf="item.discount">
                  -{{item.discount}}%
                </div>
              </div>
              <div class="recommendation-content">
                <h4 class="recommendation-name">{{item.name}}</h4>
                <div class="recommendation-price">
                  <span class="current-price">{{item.price}} ‚ÇΩ</span>
                  <span class="old-price" *ngIf="item.oldPrice">{{item.oldPrice}} ‚ÇΩ</span>
                </div>
                <div class="recommendation-rating">
                  <div class="stars">
                    <span *ngFor="let star of [1,2,3,4,5]" 
                          [class.filled]="star <= item.rating">‚òÖ</span>
                  </div>
                  <span class="rating-count">({{item.reviews}})</span>
                </div>
                <button class="add-to-cart-btn" (click)="addToCart(item)">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <button class="slider-nav prev" (click)="slidePrev()" [disabled]="currentSlide === 0">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="#327120">
            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
          </svg>
        </button>
        <button class="slider-nav next" (click)="slideNext()" [disabled]="currentSlide >= maxSlides">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="#327120">
            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <!-- <div class="dashboard-card notifications-card">
      <div class="card-header">
        <h2 class="card-title">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="#327120">
            <path d="M20 17h2v2H2v-2h2v-7a8 8 0 1 1 16 0v7zm-2 0v-7a6 6 0 1 0-12 0v7h12zm-9 4h6v2H9v-2z"/>
          </svg>
          –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        </h2>
        <button class="mark-all-read" (click)="markAllAsRead()" *ngIf="unreadNotifications > 0">
          –ü—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ
        </button>
      </div>
      
      <div class="notifications-list">
        <div class="notification-item" *ngFor="let notification of notifications" 
             [class.unread]="!notification.read">
          <div class="notification-icon" [class]="notification.type">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
              <path *ngIf="notification.type === 'order'" d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9z"/>
              <path *ngIf="notification.type === 'promotion'" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
              <path *ngIf="notification.type === 'system'" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
            </svg>
          </div>
          <div class="notification-content">
            <div class="notification-title">{{notification.title}}</div>
            <div class="notification-message">{{notification.message}}</div>
            <div class="notification-time">{{notification.time}}</div>
          </div>
          <button class="notification-action" (click)="handleNotification(notification)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="#666">
              <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
            </svg>
          </button>
        </div>
      </div>
    </div> -->

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–∫—Ü–∏–π -->
    <!-- <div class="dashboard-card promotions-card">
      <div class="card-header">
        <h2 class="card-title">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="#327120">
            <path d="M20 12c0-1.1.9-2 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-1.99.9-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-4c-1.1 0-2-.9-2-2zm-4.42 4.8L12 14.5l-3.58 2.3 1.08-4.12-3.29-2.69 4.24-.25L12 5.8l1.54 3.95 4.24.25-3.29 2.69 1.09 4.11z"/>
          </svg>
          –ê–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏
        </h2>
      </div>
      
      <div class="promotions-grid">
        <div class="promotion-item featured" 
             [style.background]="'linear-gradient(135deg, ' + featuredPromotion.color1 + ', ' + featuredPromotion.color2 + ')'">
          <div class="promotion-content">
            <h3 class="promotion-title">{{featuredPromotion.title}}</h3>
            <p class="promotion-description">{{featuredPromotion.description}}</p>
            <div class="promotion-timer">
              <div class="timer-label">–î–æ –∫–æ–Ω—Ü–∞ –∞–∫—Ü–∏–∏:</div>
              <div class="timer-display">{{promotionTime}}</div>
            </div>
            <button class="promotion-button">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>
          </div>
        </div>
        
        <div class="promotion-item" *ngFor="let promo of activePromotions">
          <div class="promotion-badge">{{promo.discount}}%</div>
          <div class="promotion-content">
            <h4 class="promotion-title">{{promo.title}}</h4>
            <p class="promotion-description">{{promo.description}}</p>
            <div class="promotion-expiry">–î–æ {{promo.expiryDate}}</div>
          </div>
        </div>
      </div>
    </div> -->
  </div>
</div>