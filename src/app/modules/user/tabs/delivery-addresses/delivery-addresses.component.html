<div class="modern-addresses">
  <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
  <div class="floating-notifications">
    <div class="notification-toast success" *ngIf="success">
      <div class="toast-icon">‚úì</div>
      <div class="toast-content">
        <p class="toast-message">{{ success }}</p>
      </div>
    </div>

    <div class="notification-toast error" *ngIf="error">
      <div class="toast-icon">!</div>
      <div class="toast-content">
        <p class="toast-message">{{ error }}</p>
      </div>
    </div>
  </div>

  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å —Ç–∞–±–∞–º–∏ -->
  <header class="hero-header">
    <div class="header-content">
      <div class="header-main">
        <div class="title-section">
          <h1 class="page-title">–ú–æ–∏ –∞–¥—Ä–µ—Å–∞</h1>
          <p class="page-subtitle">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∞–¥—Ä–µ—Å–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏</p>
        </div>
      </div>

      <!-- –¢–∞–±—ã -->
      <div class="tabs-container">
        <div class="tabs">
          <button class="tab-btn" [class.active]="activeTab === 'personal'" (click)="switchTab('personal')">
            <svg class="tab-icon" width="18" height="18" viewBox="0 0 24 24">
              <path
                d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
            </svg>
            –õ–∏—á–Ω—ã–µ –∞–¥—Ä–µ—Å–∞
            <span class="tab-count">{{ personalAddresses.length }}</span>
          </button>

          <button class="tab-btn" [class.active]="activeTab === 'transport'" (click)="switchTab('transport')">
            <svg class="tab-icon" width="18" height="18" viewBox="0 0 24 24">
              <path
                d="M18 18.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM3.5 11h11c.83 0 1.5-.67 1.5-1.5S15.33 8 14.5 8h-11C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11zm6 6h5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5h-5c-.83 0-1.5.67-1.5 1.5S8.67 17 9.5 17z" />
            </svg>
            –ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏
            <span class="tab-count">{{ transportCompanyAddresses.length }}</span>
          </button>
        </div>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
      <div class="header-actions">
        <button class="add-btn" (click)="openAddModal('personal')">
          <svg width="20" height="20" viewBox="0 0 24 24">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
          </svg>
          –î–æ–±–∞–≤–∏—Ç—å –ª–∏—á–Ω—ã–π –∞–¥—Ä–µ—Å
        </button>

        <div class="dropdown" *ngIf="activeTab === 'transport'">
          <button class="add-btn transport-btn">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
            </svg>
            –î–æ–±–∞–≤–∏—Ç—å –ü–í–ó
            <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24">
              <path d="M7 10l5 5 5-5z" />
            </svg>
          </button>
          <div class="dropdown-menu">
            <button class="dropdown-item" (click)="openAddModal('transport', 1)">
              <span class="transport-icon">üöö</span>
              –ü–í–ó –°–î–≠–ö
            </button>
            <button class="dropdown-item" (click)="openAddModal('transport', 2)">
              <span class="transport-icon">üöõ</span>
              –ü–í–ó –ë–∞–π–∫–∞–ª
            </button>
            <button class="dropdown-item" (click)="openAddModal('transport', 3)">
              <span class="transport-icon">üì¶</span>
              –ü–í–ó –î–µ–ª–æ–≤—ã–µ –ª–∏–Ω–∏–∏
            </button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="addresses-content">
    <!-- –õ–∏—á–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ -->
    <section *ngIf="activeTab === 'personal'" class="address-section">
      <div *ngIf="loading" class="loading-state">
        <div class="spinner"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥—Ä–µ—Å–æ–≤...</p>
      </div>

      <div *ngIf="!loading && personalAddresses.length === 0" class="empty-state">
        <div class="empty-illustration">
          <svg width="64" height="64" viewBox="0 0 24 24">
            <path
              d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
          </svg>
        </div>
        <h3>–õ–∏—á–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ –Ω–µ—Ç</h3>
        <p>–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∞–¥—Ä–µ—Å –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏</p>
        <button class="empty-action" (click)="openAddModal('personal')">
          –î–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å
        </button>
      </div>

      <div *ngIf="!loading && personalAddresses.length > 0" class="address-cards">
        <div *ngFor="let address of personalAddresses" class="address-card">
          <div class="card-header">
            <div class="address-type">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path
                  d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
              </svg>
              –õ–∏—á–Ω—ã–π –∞–¥—Ä–µ—Å
            </div>
            <div class="card-actions">
              <button class="action-btn edit" (click)="openEditModal(address)">
                <svg width="16" height="16" viewBox="0 0 24 24">
                  <path
                    d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                </svg>
              </button>
              <button class="action-btn delete" (click)="confirmDelete(address)">
                <svg width="16" height="16" viewBox="0 0 24 24">
                  <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
                </svg>
              </button>
            </div>
          </div>
          <div class="card-body">
            <h3 class="address-title">{{ getShortAddress(address) }}</h3>
            <div class="address-details">
              <div class="detail-row">
                <span class="detail-label">–ì–æ—Ä–æ–¥:</span>
                <span class="detail-value">{{ address.city || '–ù–µ —É–∫–∞–∑–∞–Ω' }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">–£–ª–∏—Ü–∞:</span>
                <span class="detail-value">{{ address.street || '–ù–µ —É–∫–∞–∑–∞–Ω–∞' }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">–î–æ–º:</span>
                <span class="detail-value">{{ address.house || '–ù–µ —É–∫–∞–∑–∞–Ω' }}</span>
              </div>
              <div *ngIf="address.housing" class="detail-row">
                <span class="detail-label">–ö–æ—Ä–ø—É—Å:</span>
                <span class="detail-value">{{ address.housing }}</span>
              </div>
              <div *ngIf="address.office" class="detail-row">
                <span class="detail-label">–ö–≤./–û—Ñ–∏—Å:</span>
                <span class="detail-value">{{ address.office }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- –ê–¥—Ä–µ—Å–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π -->
    <section *ngIf="activeTab === 'transport'" class="address-section">
      <div *ngIf="loading" class="loading-state">
        <div class="spinner"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏...</p>
      </div>

      <div *ngIf="!loading && transportCompanyAddresses.length === 0" class="empty-state">
        <div class="empty-illustration">
          <svg width="64" height="64" viewBox="0 0 24 24">
            <path
              d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4z" />
          </svg>
        </div>
        <h3>–ü—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏ –Ω–µ—Ç</h3>
        <p>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –ø—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏</p>
        <button class="empty-action" (click)="openAddModal('transport')">
          –î–æ–±–∞–≤–∏—Ç—å –ü–í–ó
        </button>
      </div>

      <div *ngIf="!loading && transportCompanyAddresses.length > 0" class="transport-addresses">
        <div *ngFor="let companyType of [1,2,3]" class="transport-company-section">
          <div *ngIf="groupedTransportAddresses.has(companyType) && groupedTransportAddresses.get(companyType)!.length > 0">
            <div class="company-header">
              <div class="company-info">
                <span class="company-icon">{{ getTransportCompanyIcon(companyType) }}</span>
                <h3 class="company-name">{{ getTransportCompanyName(companyType) }}</h3>
                <span class="company-count">{{ groupedTransportAddresses.get(companyType)!.length }} –ø—É–Ω–∫—Ç–æ–≤</span>
              </div>
              <button class="add-pickup-btn" (click)="openAddModal('transport', companyType)">
                <svg width="18" height="18" viewBox="0 0 24 24">
                  <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                </svg>
                –î–æ–±–∞–≤–∏—Ç—å –ü–í–ó
              </button>
            </div>

            <div class="pickup-points-grid">
              <div *ngFor="let address of groupedTransportAddresses.get(companyType)!" class="pickup-card">
                <div class="pickup-header">
                  <div class="pickup-type">
                    <svg width="14" height="14" viewBox="0 0 24 24">
                      <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" />
                    </svg>
                    {{ getTransportCompanyName(companyType) }}
                  </div>
                  <div class="card-actions">
                    <button class="action-btn edit" (click)="openEditModal(address)">
                      <svg width="16" height="16" viewBox="0 0 24 24">
                        <path
                          d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                      </svg>
                    </button>
                    <button class="action-btn delete" (click)="confirmDelete(address)">
                      <svg width="16" height="16" viewBox="0 0 24 24">
                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
                      </svg>
                    </button>
                  </div>
                </div>

                <div class="pickup-body">
                  <h4 class="pickup-name">{{ address.pickupPointName || getShortAddress(address) }}</h4>
                  <div class="pickup-details">
                    <div *ngIf="address.city" class="detail-row">
                      <svg width="12" height="12" viewBox="0 0 24 24">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" />
                      </svg>
                      –ì–æ—Ä–æ–¥: {{ address.city }}
                    </div>
                    <div *ngIf="address.street" class="detail-row">
                      <svg width="12" height="12" viewBox="0 0 24 24">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" />
                      </svg>
                      –ê–¥—Ä–µ—Å: {{ address.street }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
  <div class="modal-overlay" *ngIf="isModalOpen">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ isEditing ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å' : '–î–æ–±–∞–≤–∏—Ç—å' }} {{ addressType === 'personal' ? '–∞–¥—Ä–µ—Å' : '–ü–í–ó' }}</h2>
        <button class="modal-close" (click)="closeModal()">√ó</button>
      </div>

      <form [formGroup]="addressForm" (ngSubmit)="saveAddress()" class="address-form">
        <!-- –û–±—â–∏–µ –ø–æ–ª—è -->
        <div class="form-group">
          <label>–ì–æ—Ä–æ–¥ *</label>
          <input type="text" formControlName="city" placeholder="–ú–æ—Å–∫–≤–∞" class="form-input" />
          <div *ngIf="addressForm.get('city')?.invalid && addressForm.get('city')?.touched" class="form-error">
            –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
          </div>
        </div>

        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –ª–∏—á–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ -->
        <div *ngIf="addressType === 'personal'" class="personal-fields">
          <div class="form-group">
            <label>–£–ª–∏—Ü–∞</label>
            <input type="text" formControlName="street" placeholder="–õ–µ–Ω–∏–Ω–∞" class="form-input" />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–î–æ–º</label>
              <input type="text" formControlName="house" placeholder="10" class="form-input" />
            </div>

            <div class="form-group">
              <label>–ö–æ—Ä–ø—É—Å</label>
              <input type="text" formControlName="housing" placeholder="1" class="form-input" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–≠—Ç–∞–∂</label>
              <input type="text" formControlName="floorNumber" placeholder="3" class="form-input" />
            </div>

            <div class="form-group">
              <label>–ö–≤–∞—Ä—Ç–∏—Ä–∞/–û—Ñ–∏—Å</label>
              <input type="text" formControlName="office" placeholder="15" class="form-input" />
            </div>
          </div>

          <div class="form-group">
            <label>–ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å</label>
            <input type="text" formControlName="postIndex" placeholder="123456" class="form-input" />
          </div>
        </div>

        <!-- –ü–æ–ª—è –¥–ª—è –ü–í–ó -->
        <div *ngIf="addressType === 'transport'" class="transport-fields">
          <div class="form-group">
            <label>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è</label>
            <div class="company-selector">
              <button type="button" *ngFor="let company of [1,2,3]"
                [class.active]="selectedTransportCompany === company"
                (click)="selectedTransportCompany = company; addressForm.patchValue({transportCompanyType: company})"
                class="company-btn">
                {{ getTransportCompanyIcon(company) }}
                {{ getTransportCompanyName(company) }}
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏</label>
            <input type="text" formControlName="pickupPointName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ü–í–ó" class="form-input" />
          </div>

          <div class="form-group">
            <label>–í—ã–±–æ—Ä –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏</label>
            <div class="pickup-actions">
              <button type="button" class="map-btn" (click)="openMapModal()">
                <svg width="16" height="16" viewBox="0 0 24 24">
                  <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" />
                </svg>
                –í—ã–±—Ä–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ
              </button>
            </div>
          </div>
        </div>

        <!-- –ü–æ–ª—è —Ä–µ–≥–∏–æ–Ω–∞ –∏ —Ä–∞–π–æ–Ω–∞ -->
        <div class="form-row">
          <div class="form-group">
            <label>–†–µ–≥–∏–æ–Ω/–û–±–ª–∞—Å—Ç—å</label>
            <input type="text" formControlName="region" placeholder="–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å" class="form-input" />
          </div>
          <div class="form-group">
            <label>–†–∞–π–æ–Ω</label>
            <input type="text" formControlName="area" placeholder="–õ–µ–Ω–∏–Ω—Å–∫–∏–π —Ä–∞–π–æ–Ω" class="form-input" />
          </div>
        </div>

        <!-- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã -->
        <div class="form-row">
          <div class="form-group">
            <label>–®–∏—Ä–æ—Ç–∞</label>
            <input type="number" step="any" formControlName="latitude" class="form-input" />
          </div>
          <div class="form-group">
            <label>–î–æ–ª–≥–æ—Ç–∞</label>
            <input type="number" step="any" formControlName="longitude" class="form-input" />
          </div>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn-secondary" (click)="closeModal()">–û—Ç–º–µ–Ω–∞</button>
          <button type="submit" class="btn-primary" [disabled]="saving || addressForm.invalid">
            <span *ngIf="!saving">{{ isEditing ? '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å' : '–î–æ–±–∞–≤–∏—Ç—å' }}</span>
            <span *ngIf="saving">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –Ω–∞ –∫–∞—Ä—Ç–µ -->
  <div class="modal-overlay large" *ngIf="isMapModalOpen">
    <div class="modal modal-lg" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>–í—ã–±–æ—Ä –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏ {{ selectedTransportCompany ? '(' + getTransportCompanyName(selectedTransportCompany) + ')' : '' }}</h2>
        <button class="modal-close" (click)="closeMapModal()">√ó</button>
      </div>

      <div class="map-modal-content">
        <!-- –ö–∞—Ä—Ç–∞ -->
        <div class="map-section">
          <div class="map-header">
            <div class="city-search-box">
              <input type="text" [(ngModel)]="searchCity" [ngModelOptions]="{standalone: true}"
                placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞" class="city-input"
                (input)="onCitySearch()" [disabled]="loadingCity" />

              <button type="button" class="search-city-btn" (click)="triggerCitySearch()"
                [disabled]="loadingPoints || loadingCity">
                <span *ngIf="!loadingPoints && !loadingCity">–ü–æ–∏—Å–∫</span>
                <span *ngIf="loadingPoints || loadingCity" class="loading-dots">...</span>
              </button>

              <!-- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤ -->
              <div class="autocomplete-dropdown" *ngIf="filteredCities.length > 0">
                <div *ngFor="let city of filteredCities" class="autocomplete-item"
                  (click)="selectCityFromAutocomplete(city)">
                  <strong>{{ city.name }}</strong>
                  <span class="autocomplete-subject">{{ city.subject }}</span>
                </div>
              </div>
            </div>
          </div>
          <div #mapContainer class="map-container"></div>

          <div class="map-loading" *ngIf="loadingCity">
            <div class="spinner"></div>
            <p>–ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–∞...</p>
          </div>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ –ü–í–ó -->
        <div class="points-section">
          <div class="points-header">
            <h3>–ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏ ({{ pickupPoints.length }})</h3>
            <div class="selected-point-info" *ngIf="selectedPickupPoint">
              <div class="selected-point">
                <strong>–í—ã–±—Ä–∞–Ω–æ:</strong>
                <span class="selected-name">{{ selectedPickupPoint.name }}</span>
              </div>
            </div>
          </div>

          <div class="points-list" *ngIf="!loadingPoints">
            <div *ngFor="let point of pickupPoints" class="point-item"
              [class.selected]="selectedPickupPoint?.id === point.id" (click)="selectPickupPoint(point)">
              <div class="point-header">
                <div class="point-type">
                  <span *ngIf="point.type === 'cdek'" class="type-badge cdek">–°–î–≠–ö</span>
                  <span *ngIf="point.type === 'dellin'" class="type-badge dellin">–î–µ–ª–æ–≤—ã–µ –ª–∏–Ω–∏–∏</span>
                  <span *ngIf="point.type === 'manual'" class="type-badge manual">–í—Ä—É—á–Ω—É—é</span>
                </div>
                <h4>{{ point.name }}</h4>
              </div>
              <div class="point-address">{{ point.address }}</div>
              <div *ngIf="point.phone || point.work_time" class="point-info">
                <span *ngIf="point.phone" class="point-phone">
                  <svg width="12" height="12" viewBox="0 0 24 24">
                    <path
                      d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" />
                  </svg>
                  {{ point.phone }}
                </span>
                <span *ngIf="point.work_time" class="point-time">
                  <svg width="12" height="12" viewBox="0 0 24 24">
                    <path
                      d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" />
                    <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
                  </svg>
                  {{ point.work_time }}
                </span>
              </div>
            </div>

            <div *ngIf="pickupPoints.length === 0 && !loadingPoints" class="no-points">
              <div class="no-points-icon">üìç</div>
              <p>–ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
              <p class="hint">–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü–æ–∏—Å–∫" –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—á–∫—É –Ω–∞ –∫–∞—Ä—Ç–µ</p>
            </div>
          </div>

          <div class="points-loading" *ngIf="loadingPoints && !loadingCity">
            <div class="spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏...</p>
          </div>

          <div class="points-actions">
            <button type="button" class="btn-secondary" (click)="closeMapModal()">–û—Ç–º–µ–Ω–∞</button>
            <button type="button" class="btn-primary" (click)="useSelectedPickupPoint()"
              [disabled]="!selectedPickupPoint">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
              </svg>
              –í—ã–±—Ä–∞—Ç—å –ø—É–Ω–∫—Ç
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
  <div class="modal-overlay" *ngIf="isDeleteConfirmOpen">
    <div class="modal modal-sm" (click)="$event.stopPropagation()">
      <div class="delete-modal">
        <div class="delete-icon">!</div>
        <h3>–£–¥–∞–ª–∏—Ç—å –∞–¥—Ä–µ—Å?</h3>
        <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" (click)="closeDeleteConfirm()">–û—Ç–º–µ–Ω–∞</button>
          <button type="button" class="btn-danger" (click)="deleteAddress()" [disabled]="deleting">
            <span *ngIf="!deleting">–£–¥–∞–ª–∏—Ç—å</span>
            <span *ngIf="deleting">–£–¥–∞–ª–µ–Ω–∏–µ...</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


