<div class="create-ticket-container">
  <div class="create-header">
    <button class="back-btn" (click)="onCancel()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
      </svg>
    </button>
    <h2 class="create-title">Создание обращения</h2>
  </div>

  <div class="create-form">
    <div class="form-group">
      <label class="form-label">Тема обращения *</label>
      <input 
        type="text" 
        [(ngModel)]="subject" 
        placeholder="Например: Проблема с оплатой заказа #12345"
        class="form-input"
        maxlength="100"
      />
      <div class="input-hint">Кратко опишите суть проблемы</div>
    </div>

    <div class="form-group">
      <label class="form-label">Категория *</label>
      <div class="category-grid">
        <button 
          *ngFor="let category of categories"
          class="category-option"
          [class.selected]="selectedCategory === category"
          (click)="selectedCategory = category"
        >
          <span class="category-icon">{{ getCategoryIcon(category) }}</span>
          <span class="category-name">{{ category }}</span>
        </button>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Описание проблемы *</label>
      <textarea 
        [(ngModel)]="message" 
        placeholder="Подробно опишите вашу проблему. Чем подробнее вы опишете ситуацию, тем быстрее мы сможем помочь."
        class="form-textarea"
        rows="6"
        maxlength="2000"
        (keydown)="onKeydown($event)"
      ></textarea>
      <div class="textarea-footer">
        <div class="char-counter">{{ message.length }}/2000</div>
        <div class="textarea-hint">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
          </svg>
          Для отправки нажмите Ctrl+Enter
        </div>
      </div>
    </div>

    <div class="form-tips">
      <h4 class="tips-title">Как быстрее получить помощь?</h4>
      <ul class="tips-list">
        <li>Укажите номер заказа, если проблема связана с ним</li>
        <li>Приложите скриншоты, если это поможет понять проблему</li>
        <li>Опишите шаги, которые привели к возникновению проблемы</li>
        <li>Укажите контактные данные для обратной связи</li>
      </ul>
    </div>

    <div class="form-actions">
      <button class="cancel-btn" (click)="onCancel()" [disabled]="isLoading">
        Отмена
      </button>
      <button 
        class="submit-btn" 
        (click)="onSubmit()" 
        [disabled]="!subject.trim() || !message.trim() || isLoading"
        [class.loading]="isLoading"
      >
        <span *ngIf="!isLoading">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
          </svg>
          Отправить обращение
        </span>
        <span *ngIf="isLoading" class="loading-text">
          <span class="loading-spinner"></span>
          Отправка...
        </span>
      </button>
    </div>
  </div>
</div>