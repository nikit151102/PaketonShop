<div class="business-account-wrapper">
  <!-- Success Message -->
  <div class="success-overlay" *ngIf="success">
    <div class="success-modal">
      <div class="success-content">
        <div class="success-icon-wrapper">
          <div class="success-icon">‚úì</div>
        </div>
        <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
        <p class="success-message">–í–∞—à –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∑–∞–π–º–µ—Ç –¥–æ 24 —á–∞—Å–æ–≤.</p>
        <div class="success-actions">
          <a routerLink="/dashboard" class="btn-success-primary">
            –ü–µ—Ä–µ–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
            <svg width="16" height="16" viewBox="0 0 24 24">
              <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" fill="currentColor"/>
            </svg>
          </a>
          <!-- <button class="btn-success-secondary" (click)="resetAllForms()">–°–æ–∑–¥–∞—Ç—å –µ—â–µ –æ–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç</button> -->
        </div>
      </div>
    </div>
  </div>

  <!-- Main Container -->
  <div class="business-account-container" *ngIf="!success">
    <!-- Header -->
    <div class="account-header">
      <div class="header-content">
        <h1 class="header-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç–∞</h1>
        <p class="header-subtitle">–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–∏–º –±–∏–∑–Ω–µ—Å–æ–º</p>
      </div>
      <div class="header-decoration">
        <div class="decoration-circle"></div>
        <div class="decoration-wave"></div>
      </div>
    </div>

    <!-- Progress Steps -->
    <div class="progress-steps-modern">
      <div class="steps-track">
        <div class="steps-indicator" [style.width]="((currentStep - 1) / (totalSteps - 1)) * 100 + '%'"></div>
      </div>
      <div class="steps-container">
        <div class="step-item" 
             *ngFor="let step of [1, 2, 3]; let i = index"
             [class.active]="currentStep === i + 1"
             [class.completed]="getStepStatus(i + 1) === 'completed'"
             (click)="goToStep(i + 1)">
          <div class="step-marker">
            <span class="step-number">{{ i + 1 }}</span>
            <svg class="step-check" width="16" height="16" viewBox="0 0 24 24" *ngIf="getStepStatus(i + 1) === 'completed'">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="currentColor"/>
            </svg>
          </div>
          <div class="step-label">{{ getStepTitle(i + 1) }}</div>
        </div>
      </div>
    </div>

    <!-- Error Notification -->
    <div class="error-alert" *ngIf="error" @fadeIn>
      <div class="alert-content">
        <svg class="alert-icon" width="20" height="20" viewBox="0 0 24 24">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" fill="currentColor"/>
        </svg>
        <div class="alert-message">{{ error }}</div>
        <button class="alert-close" (click)="error = null">
          <svg width="16" height="16" viewBox="0 0 24 24">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Step Content -->
    <div class="step-wrapper" @slideIn>
      <!-- Step 1: User Registration -->
      <div class="step-content" *ngIf="currentStep === 1">
        <div class="step-card">
          <div class="card-header">
            <div class="header-icon">üë§</div>
            <div class="header-text">
              <h2>–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
              <p>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–∫–∫–∞—É–Ω—Ç—É</p>
            </div>
          </div>
          
          <form [formGroup]="userForm" class="user-form">
            <div class="form-grid">
              <!-- Email -->
              <div class="form-group" [class.error]="userForm.get('email')?.invalid && userForm.get('email')?.touched">
                <label class="form-label">
                  <span>Email –∞–¥—Ä–µ—Å</span>
                  <span class="required">*</span>
                </label>
                <div class="input-with-icon">
                  <svg width="18" height="18" viewBox="0 0 24 24">
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" fill="#327120"/>
                  </svg>
                  <input type="email" 
                         formControlName="email"
                         placeholder="your@email.com"
                         class="form-input">
                </div>
                <div class="error-message" *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched">
                  {{ userForm.get('email')?.errors?.['required'] ? '–í–≤–µ–¥–∏—Ç–µ email' : '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email' }}
                </div>
              </div>

              <!-- Password -->
              <div class="form-group" [class.error]="userForm.get('password')?.invalid && userForm.get('password')?.touched">
                <label class="form-label">
                  <span>–ü–∞—Ä–æ–ª—å</span>
                  <span class="required">*</span>
                </label>
                <div class="input-with-icon">
                  <svg width="18" height="18" viewBox="0 0 24 24">
                    <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" fill="#327120"/>
                  </svg>
                  <input type="password" 
                         formControlName="password"
                         placeholder="–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤"
                         class="form-input">
                </div>
                
                <!-- Password Strength -->
                <div class="password-strength" *ngIf="userForm.get('password')?.value">
                  <div class="strength-indicator">
                    <div class="strength-segment" [class.active]="checkPasswordStrength(userForm.get('password')?.value).strength >= 1"></div>
                    <div class="strength-segment" [class.active]="checkPasswordStrength(userForm.get('password')?.value).strength >= 2"></div>
                    <div class="strength-segment" [class.active]="checkPasswordStrength(userForm.get('password')?.value).strength >= 3"></div>
                    <div class="strength-segment" [class.active]="checkPasswordStrength(userForm.get('password')?.value).strength >= 4"></div>
                    <div class="strength-segment" [class.active]="checkPasswordStrength(userForm.get('password')?.value).strength >= 5"></div>
                  </div>
                  <div class="strength-label">
                    –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: <strong>{{ checkPasswordStrength(userForm.get('password')?.value).message }}</strong>
                  </div>
                </div>
                
                <div class="error-message" *ngIf="userForm.get('password')?.invalid && userForm.get('password')?.touched">
                  <div *ngIf="userForm.get('password')?.errors?.['required']">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</div>
                  <div *ngIf="userForm.get('password')?.errors?.['minlength']">–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤</div>
                  <div *ngIf="userForm.get('password')?.errors?.['pattern']">–ë—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã</div>
                </div>
              </div>

              <!-- Confirm Password -->
              <div class="form-group" [class.error]="(userForm.get('confirmPassword')?.invalid || userForm.errors?.['mismatch']) && userForm.get('confirmPassword')?.touched">
                <label class="form-label">
                  <span>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</span>
                  <span class="required">*</span>
                </label>
                <div class="input-with-icon">
                  <svg width="18" height="18" viewBox="0 0 24 24">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="#327120"/>
                  </svg>
                  <input type="password" 
                         formControlName="confirmPassword"
                         placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                         class="form-input">
                </div>
                <div class="error-message" *ngIf="userForm.get('confirmPassword')?.invalid && userForm.get('confirmPassword')?.touched">
                  {{ userForm.errors?.['mismatch'] ? '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç' : '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å' }}
                </div>
              </div>

              <!-- Name Fields -->
              <div class="form-group double">
                <label class="form-label">
                  <span>–§–∞–º–∏–ª–∏—è –∏ –∏–º—è</span>
                  <span class="required">*</span>
                </label>
                <div class="double-inputs">
                  <div class="input-wrapper" [class.error]="userForm.get('lastName')?.invalid && userForm.get('lastName')?.touched">
                    <input type="text" 
                           formControlName="lastName"
                           placeholder="–ò–≤–∞–Ω–æ–≤"
                           class="form-input">
                  </div>
                  <div class="input-wrapper" [class.error]="userForm.get('firstName')?.invalid && userForm.get('firstName')?.touched">
                    <input type="text" 
                           formControlName="firstName"
                           placeholder="–ò–≤–∞–Ω"
                           class="form-input">
                  </div>
                </div>
              </div>

              <!-- Phone -->
              <div class="form-group" [class.error]="userForm.get('phoneNumber')?.invalid && userForm.get('phoneNumber')?.touched">
                <label class="form-label">
                  <span>–¢–µ–ª–µ—Ñ–æ–Ω</span>
                  <span class="required">*</span>
                </label>
                <div class="phone-input">
                  <span class="country-code">+7</span>
                  <input type="tel" 
                         formControlName="phoneNumber"
                         placeholder="(999) 999-99-99"
                         class="form-input">
                </div>
                <div class="error-message" *ngIf="userForm.get('phoneNumber')?.invalid && userForm.get('phoneNumber')?.touched">
                  –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
                </div>
              </div>

              <!-- Terms -->
              <div class="form-group terms-group" [class.error]="userForm.get('agreeToTerms')?.invalid && userForm.get('agreeToTerms')?.touched">
                <label class="checkbox-container">
                  <input type="checkbox" 
                         formControlName="agreeToTerms"
                         class="checkbox-input">
                  <span class="checkbox-custom"></span>
                  <span class="checkbox-text">
                    –Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å 
                    <a href="#" class="text-link">—É—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a> 
                    –∏ 
                    <a href="#" class="text-link">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                  </span>
                </label>
                <div class="error-message" *ngIf="userForm.get('agreeToTerms')?.invalid && userForm.get('agreeToTerms')?.touched">
                  –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- Step 2: Company Information -->
      <div class="step-content" *ngIf="currentStep === 2">
        <div class="step-card">
          <div class="card-header">
            <div class="header-icon">üè¢</div>
            <div class="header-text">
              <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏–∏</h2>
              <p>–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞</p>
            </div>
          </div>
          
          <form [formGroup]="companyForm" class="company-form">
            <!-- Partner Type -->
            <div class="form-section">
              <h3 class="section-title">–¢–∏–ø –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</h3>
              <div class="type-selector">
                <div class="loading-overlay" *ngIf="isLoading">
                  <div class="spinner"></div>
                  <span>–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                </div>
                
                <div class="type-cards">
                  <div class="type-card" 
                       *ngFor="let type of partnerTypes"
                       [class.active]="companyForm.get('partnerTypeId')?.value === type.id"
                       (click)="selectPartnerType(type)">
                    <div class="type-icon">{{ type.code === 1 ? 'üè¢' : 'üë§' }}</div>
                    <div class="type-content">
                      <div class="type-title">{{ type.fullName }}</div>
                      <div class="type-subtitle">{{ type.shortName }}</div>
                    </div>
                    <div class="type-check" *ngIf="companyForm.get('partnerTypeId')?.value === type.id">
                      <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="#327120"/>
                      </svg>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="error-message" *ngIf="companyForm.get('partnerTypeId')?.invalid && companyForm.get('partnerTypeId')?.touched">
                –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
              </div>
            </div>

            <!-- Company Details -->
            <div class="form-section">
              <h3 class="section-title">–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
              <div class="form-grid">
                <div class="form-group" [class.error]="companyForm.get('fullName')?.invalid && companyForm.get('fullName')?.touched">
                  <label class="form-label">
                    <span>–ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" 
                         formControlName="fullName"
                         [placeholder]="getFullNamePlaceholder()"
                         class="form-input">
                </div>

                <div class="form-group" [class.error]="companyForm.get('shortName')?.invalid && companyForm.get('shortName')?.touched">
                  <label class="form-label">
                    <span>–ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" 
                         formControlName="shortName"
                         [placeholder]="getShortNamePlaceholder()"
                         class="form-input">
                </div>

                <div class="form-group" [class.error]="companyForm.get('workDirection')?.invalid && companyForm.get('workDirection')?.touched">
                  <label class="form-label">
                    <span>–°—Ñ–µ—Ä–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" 
                         formControlName="workDirection"
                         placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: IT-—É—Å–ª—É–≥–∏"
                         class="form-input">
                </div>
              </div>
            </div>

            <!-- Legal Details -->
            <div class="form-section">
              <h3 class="section-title">–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã</h3>
              <div class="form-grid">
                <div class="form-group" [class.error]="companyForm.get('inn')?.invalid && companyForm.get('inn')?.touched">
                  <label class="form-label">
                    <span>–ò–ù–ù</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" 
                         formControlName="inn"
                         placeholder="10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä"
                         class="form-input">
                </div>

                <div class="form-group" [class.error]="companyForm.get('ogrn')?.invalid && companyForm.get('ogrn')?.touched">
                  <label class="form-label">
                    <span>{{ selectedPartnerType?.code === 1 ? '–û–ì–†–ù' : '–û–ì–†–ù–ò–ü' }}</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" 
                         formControlName="ogrn"
                         [placeholder]="getOgrnPlaceholder()"
                         class="form-input">
                </div>

                <div class="form-group" [class.error]="companyForm.get('kpp')?.invalid && companyForm.get('kpp')?.touched" 
                     *ngIf="selectedPartnerType?.code === 1">
                  <label class="form-label">
                    <span>–ö–ü–ü</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" 
                         formControlName="kpp"
                         placeholder="9 —Ü–∏—Ñ—Ä"
                         class="form-input">
                </div>
              </div>
            </div>

            <!-- Address -->
            <div class="form-section">
              <h3 class="section-title">–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å</h3>
              <div formGroupName="address">
                <div class="form-grid">
                  <div class="form-group" [class.error]="companyForm.get('address.country')?.invalid && companyForm.get('address.country')?.touched">
                    <label class="form-label">
                      <span>–°—Ç—Ä–∞–Ω–∞</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" 
                           formControlName="country"
                           placeholder="–†–æ—Å—Å–∏—è"
                           class="form-input">
                  </div>

                  <div class="form-group" [class.error]="companyForm.get('address.region')?.invalid && companyForm.get('address.region')?.touched">
                    <label class="form-label">
                      <span>–†–µ–≥–∏–æ–Ω</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" 
                           formControlName="region"
                           placeholder="–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å"
                           class="form-input">
                  </div>

                  <div class="form-group" [class.error]="companyForm.get('address.city')?.invalid && companyForm.get('address.city')?.touched">
                    <label class="form-label">
                      <span>–ì–æ—Ä–æ–¥</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" 
                           formControlName="city"
                           placeholder="–ú–æ—Å–∫–≤–∞"
                           class="form-input">
                  </div>

                  <div class="form-group" [class.error]="companyForm.get('address.street')?.invalid && companyForm.get('address.street')?.touched">
                    <label class="form-label">
                      <span>–£–ª–∏—Ü–∞</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" 
                           formControlName="street"
                           placeholder="–õ–µ–Ω–∏–Ω–∞"
                           class="form-input">
                  </div>

                  <div class="form-group" [class.error]="companyForm.get('address.house')?.invalid && companyForm.get('address.house')?.touched">
                    <label class="form-label">
                      <span>–î–æ–º</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" 
                           formControlName="house"
                           placeholder="10"
                           class="form-input">
                  </div>

                  <div class="form-group" [class.error]="companyForm.get('address.postIndex')?.invalid && companyForm.get('address.postIndex')?.touched">
                    <label class="form-label">
                      <span>–ò–Ω–¥–µ–∫—Å</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" 
                           formControlName="postIndex"
                           placeholder="101000"
                           class="form-input">
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- Step 3: Documents Upload -->
      <div class="step-content" *ngIf="currentStep === 3">
        <div class="step-card">
          <div class="card-header">
            <div class="header-icon">üìÑ</div>
            <div class="header-text">
              <h2>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>
              <p>{{ selectedPartnerType?.code === 1 ? '–ü–∞–∫–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –û–û–û' : '–ü–∞–∫–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ò–ü' }}</p>
            </div>
          </div>

          <!-- Required Documents -->
          <div class="documents-section">
            <div class="section-header">
              <h3 class="section-title">–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h3>
              <div class="section-badge">{{ getUploadedRequiredDocumentsCount() }}/{{ getRequiredDocuments().length }}</div>
            </div>
            
            <div class="documents-list">
              <div class="document-item" 
                   *ngFor="let doc of getRequiredDocuments()"
                   [class.uploaded]="isDocumentUploaded(doc.id)">
                <div class="document-info">
                  <div class="document-icon">
                    {{ getFileIcon(getUploadedDocument(doc.id)?.fileType || '') || 'üìé' }}
                  </div>
                  <div class="document-details">
                    <div class="document-title">{{ doc.name }}</div>
                    <div class="document-status">
                      <span class="status-dot" [class.uploaded]="isDocumentUploaded(doc.id)"></span>
                      {{ isDocumentUploaded(doc.id) ? '–ó–∞–≥—Ä—É–∂–µ–Ω–æ' : '–ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ' }}
                    </div>
                  </div>
                </div>
                
                <div class="document-actions">
                  <div class="file-preview" *ngIf="getUploadedDocument(doc.id) as uploadedDoc">
                    <span class="file-name">{{ uploadedDoc.fileName }}</span>
                    <span class="file-size">{{ formatFileSize(uploadedDoc.fileSize) }}</span>
                  </div>
                  
                  <div class="action-buttons">
                    <label class="btn-upload" [class.reupload]="isDocumentUploaded(doc.id)">
                      <input type="file" 
                             (change)="onFileSelected($event, doc.id)"
                             accept=".pdf,.jpg,.jpeg,.png"
                             hidden>
                      <span>{{ isDocumentUploaded(doc.id) ? '–ó–∞–º–µ–Ω–∏—Ç—å' : '–ó–∞–≥—Ä—É–∑–∏—Ç—å' }}</span>
                    </label>
                    
                    <button class="btn-remove" 
                            *ngIf="isDocumentUploaded(doc.id)"
                            (click)="removeDocument(doc.id)">
                      <svg width="16" height="16" viewBox="0 0 24 24">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Optional Documents -->
          <div class="documents-section optional" *ngIf="getOptionalDocuments().length > 0">
            <div class="section-header">
              <h3 class="section-title">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h3>
              <div class="section-badge optional">{{ getUploadedOptionalDocumentsCount() }}/{{ getOptionalDocuments().length }}</div>
            </div>
            
            <div class="documents-list">
              <div class="document-item optional" 
                   *ngFor="let doc of getOptionalDocuments()"
                   [class.uploaded]="isDocumentUploaded(doc.id)">
                <div class="document-info">
                  <div class="document-icon">üìé</div>
                  <div class="document-details">
                    <div class="document-title">{{ doc.name }}</div>
                    <div class="document-status optional">
                      {{ isDocumentUploaded(doc.id) ? '–ó–∞–≥—Ä—É–∂–µ–Ω–æ' : '–ü–æ –∂–µ–ª–∞–Ω–∏—é' }}
                    </div>
                  </div>
                </div>
                
                <div class="document-actions">
                  <label class="btn-upload optional">
                    <input type="file" 
                           (change)="onFileSelected($event, doc.id)"
                           accept=".pdf,.jpg,.jpeg,.png"
                           hidden>
                    <span>–ó–∞–≥—Ä—É–∑–∏—Ç—å</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Summary -->
          <div class="upload-summary">
            <div class="summary-card">
              <div class="summary-header">
                <svg width="20" height="20" viewBox="0 0 24 24">
                  <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="#327120"/>
                </svg>
                <h4>–°–≤–æ–¥–∫–∞ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º</h4>
              </div>
              <div class="summary-stats">
                <div class="stat-item">
                  <span class="stat-label">–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:</span>
                  <span class="stat-value">{{ getUploadedRequiredDocumentsCount() }}/{{ getRequiredDocuments().length }}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ:</span>
                  <span class="stat-value">{{ getUploadedOptionalDocumentsCount() }}/{{ getOptionalDocuments().length }}</span>
                </div>
                <div class="stat-item total">
                  <span class="stat-label">–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤:</span>
                  <span class="stat-value">{{ uploadedDocuments.length }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <div class="step-navigation">
      <button type="button" 
              class="btn-nav prev"
              *ngIf="currentStep > 1"
              (click)="prevStep()">
        <svg width="16" height="16" viewBox="0 0 24 24">
          <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z" fill="currentColor"/>
        </svg>
        –ù–∞–∑–∞–¥
      </button>
      
      <div class="step-counter">
        –®–∞–≥ {{ currentStep }} –∏–∑ {{ totalSteps }}
      </div>
      
      <button type="button" 
              class="btn-nav next"
              *ngIf="currentStep < totalSteps"
              (click)="nextStep()"
              [disabled]="!validateCurrentStep()">
        –î–∞–ª–µ–µ
        <svg width="16" height="16" viewBox="0 0 24 24">
          <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" fill="currentColor"/>
        </svg>
      </button>
      
      <button type="button" 
              class="btn-nav submit"
              *ngIf="currentStep === totalSteps"
              (click)="submitBusinessAccount()"
              [disabled]="isSubmitting || !validateCurrentStep()">
        <span class="btn-content">
          <span class="btn-text">{{ isSubmitting ? '–û—Ç–ø—Ä–∞–≤–∫–∞...' : '–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é' }}</span>
          <span class="btn-spinner" *ngIf="isSubmitting"></span>
        </span>
      </button>
    </div>
  </div>
</div>