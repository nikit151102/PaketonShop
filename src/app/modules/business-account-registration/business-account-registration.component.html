<div class="modern-business-registration">
  <!-- Success State -->
  @if (success) {
  <div class="success-state" @fadeIn>
    <div class="success-content">
      <div class="success-visual">
        <div class="confetti-container">
          @for (i of [1,2,3,4,5,6,7,8,9,10]; track i) {
          <div class="confetti" [style]="getConfettiStyle(i)"></div>
          }
        </div>
        <div class="success-icon-animated">
          <svg class="checkmark" viewBox="0 0 52 52">
            <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" />
            <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
          </svg>
        </div>
      </div>
      <div class="success-details">
        <h2>–ì–æ—Ç–æ–≤–æ! üéâ</h2>
        <p class="success-message">–í–∞—à –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É</p>

        <div class="success-info-cards">
          <div class="info-card">
            <div class="info-icon">‚è±Ô∏è</div>
            <div class="info-content">
              <div class="info-title">–í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏</div>
              <div class="info-value">–¥–æ 24 —á–∞—Å–æ–≤</div>
            </div>
          </div>
          <div class="info-card">
            <div class="info-icon">üìß</div>
            <div class="info-content">
              <div class="info-title">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
              <div class="info-value">–ø—Ä–∏–¥—É—Ç –Ω–∞ email</div>
            </div>
          </div>
        </div>

        <div class="success-actions">
          <a routerLink="/dashboard" class="btn-gradient">
            <span>–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞–±–∏–Ω–µ—Ç</span>
            <svg viewBox="0 0 24 24">
              <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
            </svg>
          </a>
          <button class="btn-outline" (click)="createAnother()">
            <svg viewBox="0 0 24 24">
              <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
            </svg>
            –°–æ–∑–¥–∞—Ç—å –µ—â–µ –∞–∫–∫–∞—É–Ω—Ç
          </button>
        </div>
      </div>
    </div>
  </div>
  }

  <!-- Main Registration Flow -->
  @if (!success) {
  <div class="registration-container">
    <!-- Header with Progress -->
    <header class="registration-header">
      <div class="header-top">
        <a href="/" class="logo">
          <svg viewBox="0 0 40 40">
            <path
              d="M20 0C9 0 0 9 0 20s9 20 20 20 20-9 20-20S31 0 20 0zm0 36c-8.8 0-16-7.2-16-16S11.2 4 20 4s16 7.2 16 16-7.2 16-16 16z" />
            <path
              d="M20 10c-5.5 0-10 4.5-10 10s4.5 10 10 10 10-4.5 10-10-4.5-10-10-10zm0 18c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8z" />
          </svg>
          <span>BusinessPro</span>
        </a>

        <div class="user-progress">
          <div class="progress-info">
            <div class="progress-label">–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</div>
            <div class="progress-percent">{{ getProgressPercentage() }}%</div>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="getProgressPercentage()"></div>
          </div>
        </div>
      </div>

      <div class="header-main">
        <div class="header-content">
          <div class="step-indicator">
            <div class="step-badge">–®–∞–≥ {{ currentStep }} –∏–∑ {{ totalSteps }}</div>
            <h1>{{ getCurrentStepTitle() }}</h1>
          </div>

          <div class="step-nav-tabs">
            @for (step of [1,2,3]; track step) {
            <button class="step-tab" [class.active]="currentStep === step"
              [class.completed]="getStepStatus(step) === 'completed'" (click)="goToStep(step)">
              <div class="tab-icon">
                @if (getStepStatus(step) === 'completed') {
                <svg viewBox="0 0 20 20">
                  <path
                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" />
                </svg>
                } @else {
                {{ step }}
                }
              </div>
              <div class="tab-label">
                <div class="tab-title">{{ getStepTitle(step) }}</div>
                <div class="tab-subtitle">{{ getStepSubtitle(step) }}</div>
              </div>
              <div class="tab-line"></div>
            </button>
            }
          </div>
        </div>

        <div class="header-help">
          <button class="help-btn" (click)="toggleHelp()">
            <svg viewBox="0 0 24 24">
              <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" />
            </svg>
            –ü–æ–º–æ—â—å
          </button>
        </div>
      </div>
    </header>

    <!-- Help Panel -->
    @if (showHelp) {
    <div class="help-panel" @slideDown>
      <div class="help-header">
        <h3>–ü–æ–º–æ—â—å –ø–æ —Ç–µ–∫—É—â–µ–º—É —à–∞–≥—É</h3>
        <button class="close-help" (click)="toggleHelp()">
          <svg viewBox="0 0 24 24">
            <path
              d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
          </svg>
        </button>
      </div>
      <div class="help-content">
        <div class="help-tip">
          <div class="tip-icon">üí°</div>
          <p>{{ getCurrentStepHelp() }}</p>
        </div>
      </div>
    </div>
    }

    <!-- Error Toast -->
    @if (error) {
    <div class="error-toast" @slideDown>
      <div class="toast-content">
        <div class="toast-icon">
          <svg viewBox="0 0 24 24">
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
          </svg>
        </div>
        <div class="toast-message">{{ error }}</div>
        <button class="toast-close" (click)="error = null">
          <svg viewBox="0 0 24 24">
            <path
              d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
          </svg>
        </button>
      </div>
    </div>
    }

    <!-- Main Content -->
    <main class="registration-main">
      <div class="step-container" @fadeSlide>
        <!-- Step 1: User Info -->
        @if (currentStep === 1) {
        <div class="step-user-info">
          <div class="step-intro">
            <div class="intro-icon">üë§</div>
            <div class="intro-content">
              <h2>–°–æ–∑–¥–∞–Ω–∏–µ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏</h2>
              <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Å—Ç–µ–º–µ</p>
            </div>
          </div>

          <form [formGroup]="userForm" class="modern-form">
            <div class="form-section">
              <div class="section-header">
                <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                <div class="section-tooltip">
                  <div class="tooltip-trigger">
                    <svg viewBox="0 0 24 24">
                      <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" />
                    </svg>
                  </div>
                  <div class="tooltip-content">
                    –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
                  </div>
                </div>
              </div>

              <div class="form-grid">
                <div class="form-group"
                  [class.error]="userForm.get('email')?.invalid && userForm.get('email')?.touched">
                  <label class="form-label">
                    <span>Email –∞–¥—Ä–µ—Å</span>
                    <span class="required">*</span>
                  </label>
                  <div class="input-with-validation">
                    <input type="email" formControlName="email" placeholder="your.email@company.com"
                      class="modern-input"
                      [class.invalid]="userForm.get('email')?.invalid && userForm.get('email')?.touched">
                    @if (userForm.get('email')?.valid && userForm.get('email')?.touched) {
                    <div class="validation-success">
                      <svg viewBox="0 0 20 20">
                        <path
                          d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" />
                      </svg>
                    </div>
                    }
                  </div>
                  @if (userForm.get('email')?.invalid && userForm.get('email')?.touched) {
                  <div class="error-message">
                    {{ getEmailErrorMessage() }}
                  </div>
                  }
                </div>

                <div class="form-group"
                  [class.error]="userForm.get('phoneNumber')?.invalid && userForm.get('phoneNumber')?.touched">
                  <label class="form-label">
                    <span>–¢–µ–ª–µ—Ñ–æ–Ω</span>
                    <span class="required">*</span>
                  </label>
                  <div class="phone-input-group">
                    <div class="country-selector">
                      <span>+7</span>
                      <svg viewBox="0 0 24 24">
                        <path d="M7 10l5 5 5-5z" />
                      </svg>
                    </div>
                    <input type="tel" formControlName="phoneNumber" placeholder="(999) 999-99-99"
                      class="modern-input phone"
                      [class.invalid]="userForm.get('phoneNumber')?.invalid && userForm.get('phoneNumber')?.touched">
                  </div>
                </div>
              </div>
            </div>

            <div class="form-section">
              <div class="section-header">
                <h3>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
              </div>

              <div class="form-grid">
                <div class="form-group"
                  [class.error]="userForm.get('lastName')?.invalid && userForm.get('lastName')?.touched">
                  <label class="form-label">
                    <span>–§–∞–º–∏–ª–∏—è</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" formControlName="lastName" placeholder="–ò–≤–∞–Ω–æ–≤" class="modern-input">
                </div>

                <div class="form-group"
                  [class.error]="userForm.get('firstName')?.invalid && userForm.get('firstName')?.touched">
                  <label class="form-label">
                    <span>–ò–º—è</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" formControlName="firstName" placeholder="–ò–≤–∞–Ω" class="modern-input">
                </div>
              </div>
            </div>

            <div class="form-section">
              <div class="section-header">
                <h3>–ó–∞—â–∏—Ç–∞ –∞–∫–∫–∞—É–Ω—Ç–∞</h3>
              </div>

              <div class="form-grid">
                <div class="form-group"
                  [class.error]="userForm.get('password')?.invalid && userForm.get('password')?.touched">
                  <label class="form-label">
                    <span>–ü–∞—Ä–æ–ª—å</span>
                    <span class="required">*</span>
                    <div class="password-strength-indicator" [class]="'strength-' + getPasswordStrengthLevel()">
                      <div class="strength-bar"></div>
                      <div class="strength-bar"></div>
                      <div class="strength-bar"></div>
                      <div class="strength-bar"></div>
                    </div>
                  </label>
                  <div class="password-input-wrapper">
                    <input [type]="showPassword ? 'text' : 'password'" formControlName="password"
                      placeholder="–°–æ–∑–¥–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å" class="modern-input" (input)="onPasswordChange()">
                    <button type="button" class="password-toggle" (click)="togglePasswordVisibility()">
                      @if (showPassword) {
                      <svg viewBox="0 0 24 24">
                        <path
                          d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z" />
                      </svg>
                      } @else {
                      <svg viewBox="0 0 24 24">
                        <path
                          d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                      </svg>
                      }
                    </button>
                  </div>
                  <div class="password-hints">
                    @if (passwordStrength.hints.length > 0) {
                    <div class="hints-list">
                      @for (hint of passwordStrength.hints; track hint) {
                      <div class="hint-item" [class.valid]="hint.valid">
                        <span class="hint-icon">
                          @if (hint.valid) {
                          ‚úì
                          } @else {
                          ‚Ä¢
                          }
                        </span>
                        {{ hint.message }}
                      </div>
                      }
                    </div>
                    }
                  </div>
                </div>

                <div class="form-group"
                  [class.error]="(userForm.get('confirmPassword')?.invalid || userForm.errors?.['mismatch']) && userForm.get('confirmPassword')?.touched">
                  <label class="form-label">
                    <span>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</span>
                    <span class="required">*</span>
                  </label>
                  <input [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword"
                    placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" class="modern-input">
                  <div class="password-match" [class.match]="passwordsMatch()"
                    [class.mismatch]="!passwordsMatch() && userForm.get('confirmPassword')?.touched">
                    {{ getPasswordMatchMessage() }}
                  </div>
                </div>
              </div>
            </div>

            <div class="form-section terms">
              <div class="modern-checkbox">
                <input type="checkbox" id="agreeToTerms" formControlName="agreeToTerms" class="checkbox-input">
                <label for="agreeToTerms" class="checkbox-label">
                  <div class="checkbox-box">
                    <svg viewBox="0 0 20 20">
                      <path
                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" />
                    </svg>
                  </div>
                  <span class="checkbox-text">
                    –Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å
                    <a href="#" class="link">–£—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a>
                    –∏
                    <a href="#" class="link">–ü–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                  </span>
                </label>
              </div>
              @if (userForm.get('agreeToTerms')?.invalid && userForm.get('agreeToTerms')?.touched) {
              <div class="error-message">
                –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏
              </div>
              }
            </div>
          </form>
        </div>
        }

        <!-- Step 2: Company Info -->
        @if (currentStep === 2) {
        <div class="step-company-info">
          <div class="step-intro">
            <div class="intro-icon">üè¢</div>
            <div class="intro-content">
              <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏–∏</h2>
              <p>–£–∫–∞–∂–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏</p>
            </div>
          </div>

          <form [formGroup]="companyForm" class="modern-form">
            <!-- Organization Type Selection -->
            <div class="form-section">
              <div class="section-header">
                <h3>–¢–∏–ø –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</h3>
                <div class="section-tooltip">
                  <div class="tooltip-trigger">
                    <svg viewBox="0 0 24 24">
                      <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" />
                    </svg>
                  </div>
                  <div class="tooltip-content">
                    –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–æ–≤—É—é —Ñ–æ—Ä–º—É –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞. –û—Ç —ç—Ç–æ–≥–æ –∑–∞–≤–∏—Å–∏—Ç –Ω–∞–±–æ—Ä –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
                  </div>
                </div>
              </div>

              <div class="org-type-cards">
                @for (type of partnerTypes; track type.id) {
                <div class="org-type-card" [class.active]="companyForm.get('partnerTypeId')?.value === type.id"
                  (click)="selectPartnerType(type)">
                  <div class="type-visual">
                    <div class="type-icon-bg">
                      @if (type.code === 1) {
                      <svg viewBox="0 0 24 24">
                        <path
                          d="M14 6V4h-4v2h4zM4 8v11h16V8H4zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2h4z" />
                      </svg>
                      } @else {
                      <svg viewBox="0 0 24 24">
                        <path
                          d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                      </svg>
                      }
                    </div>
                  </div>
                  <div class="type-content">
                    <div class="type-name">{{ type.shortName }}</div>
                    <div class="type-description">{{ type.fullName }}</div>
                  </div>
                  <div class="type-selected">
                    <div class="selected-indicator"></div>
                  </div>
                </div>
                }
              </div>
            </div>

            <!-- Company Details -->
            <div class="form-section">
              <div class="section-header">
                <h3>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
              </div>

              <div class="form-grid">
                <div class="form-group"
                  [class.error]="companyForm.get('fullName')?.invalid && companyForm.get('fullName')?.touched">
                  <label class="form-label">
                    <span>–ü–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" formControlName="fullName" [placeholder]="getFullNamePlaceholder()"
                    class="modern-input">
                </div>

                <div class="form-group"
                  [class.error]="companyForm.get('shortName')?.invalid && companyForm.get('shortName')?.touched">
                  <label class="form-label">
                    <span>–ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" formControlName="shortName" [placeholder]="getShortNamePlaceholder()"
                    class="modern-input">
                </div>

                <div class="form-group"
                  [class.error]="companyForm.get('workDirection')?.invalid && companyForm.get('workDirection')?.touched">
                  <label class="form-label">
                    <span>–°—Ñ–µ—Ä–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" formControlName="workDirection"
                    placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: IT-—É—Å–ª—É–≥–∏, —Ä–æ–∑–Ω–∏—á–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è" class="modern-input">
                </div>
              </div>
            </div>

            <!-- Legal Details -->
            <div class="form-section">
              <div class="section-header">
                <h3>–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã</h3>
                <div class="section-tooltip">
                  <div class="tooltip-trigger">
                    <svg viewBox="0 0 24 24">
                      <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" />
                    </svg>
                  </div>
                  <div class="tooltip-content">
                    –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∏—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏
                  </div>
                </div>
              </div>

              <div class="form-grid">
                <div class="form-group"
                  [class.error]="companyForm.get('inn')?.invalid && companyForm.get('inn')?.touched">
                  <label class="form-label">
                    <span>–ò–ù–ù</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" formControlName="inn"
                    [placeholder]="selectedPartnerType?.code === 1 ? '10 —Ü–∏—Ñ—Ä' : '12 —Ü–∏—Ñ—Ä'" class="modern-input">
                </div>

                <div class="form-group"
                  [class.error]="companyForm.get('ogrn')?.invalid && companyForm.get('ogrn')?.touched">
                  <label class="form-label">
                    <span>{{ selectedPartnerType?.code === 1 ? '–û–ì–†–ù' : '–û–ì–†–ù–ò–ü' }}</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" formControlName="ogrn" [placeholder]="getOgrnPlaceholder()" class="modern-input">
                </div>

                @if (selectedPartnerType?.code === 1) {
                <div class="form-group"
                  [class.error]="companyForm.get('kpp')?.invalid && companyForm.get('kpp')?.touched">
                  <label class="form-label">
                    <span>–ö–ü–ü</span>
                    <span class="required">*</span>
                  </label>
                  <input type="text" formControlName="kpp" placeholder="9 —Ü–∏—Ñ—Ä" class="modern-input">
                </div>
                }
              </div>
            </div>

            <!-- Address -->
            <div class="form-section">
              <div class="section-header">
                <h3>–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å</h3>
              </div>

              <div class="address-form" formGroupName="address">
                <div class="form-grid">
                  <div class="form-group"
                    [class.error]="companyForm.get('address.country')?.invalid && companyForm.get('address.country')?.touched">
                    <label class="form-label">
                      <span>–°—Ç—Ä–∞–Ω–∞</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" formControlName="country" placeholder="–†–æ—Å—Å–∏—è" class="modern-input">
                  </div>

                  <div class="form-group"
                    [class.error]="companyForm.get('address.region')?.invalid && companyForm.get('address.region')?.touched">
                    <label class="form-label">
                      <span>–†–µ–≥–∏–æ–Ω/–û–±–ª–∞—Å—Ç—å</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" formControlName="region" placeholder="–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å" class="modern-input">
                  </div>

                  <div class="form-group"
                    [class.error]="companyForm.get('address.city')?.invalid && companyForm.get('address.city')?.touched">
                    <label class="form-label">
                      <span>–ì–æ—Ä–æ–¥</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" formControlName="city" placeholder="–ú–æ—Å–∫–≤–∞" class="modern-input">
                  </div>

                  <div class="form-group"
                    [class.error]="companyForm.get('address.street')?.invalid && companyForm.get('address.street')?.touched">
                    <label class="form-label">
                      <span>–£–ª–∏—Ü–∞</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" formControlName="street" placeholder="—É–ª. –õ–µ–Ω–∏–Ω–∞" class="modern-input">
                  </div>

                  <div class="form-group"
                    [class.error]="companyForm.get('address.house')?.invalid && companyForm.get('address.house')?.touched">
                    <label class="form-label">
                      <span>–î–æ–º</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" formControlName="house" placeholder="10" class="modern-input">
                  </div>

                  <div class="form-group"
                    [class.error]="companyForm.get('address.postIndex')?.invalid && companyForm.get('address.postIndex')?.touched">
                    <label class="form-label">
                      <span>–ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å</span>
                      <span class="required">*</span>
                    </label>
                    <input type="text" formControlName="postIndex" placeholder="101000" class="modern-input">
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
        }

        <!-- Step 3: Documents -->
        @if (currentStep === 3) {
        <div class="step-documents">
          <div class="step-intro">
            <div class="intro-icon">üìÅ</div>
            <div class="intro-content">
              <h2>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>
              <p>{{ selectedPartnerType?.code === 1 ? '–ü–∞–∫–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –û–û–û' : '–ü–∞–∫–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ò–ü' }}</p>
            </div>
          </div>

          <!-- Upload Methods -->
          <div class="upload-methods">
            <div class="method-tabs">
              <button class="method-tab" [class.active]="uploadMethod === 'single'" (click)="uploadMethod = 'single'">
                <div class="tab-icon">üìÑ</div>
                <div class="tab-content">
                  <div class="tab-title">–ü–æ—à—Ç—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞</div>
                  <div class="tab-description">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–∞–∂–¥—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ—Ç–¥–µ–ª—å–Ω–æ</div>
                </div>
              </button>

              <button class="method-tab" [class.active]="uploadMethod === 'cloud'" (click)="uploadMethod = 'cloud'">
                <div class="tab-icon">‚òÅÔ∏è</div>
                <div class="tab-content">
                  <div class="tab-title">–°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±–ª–∞–∫–æ</div>
                  <div class="tab-description">–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ</div>
                </div>
              </button>

              <button class="method-tab" [class.active]="uploadMethod === 'archive'" (click)="uploadMethod = 'archive'">
                <div class="tab-icon">üóúÔ∏è</div>
                <div class="tab-content">
                  <div class="tab-title">–ê—Ä—Ö–∏–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</div>
                  <div class="tab-description">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ–¥–Ω–∏–º –∞—Ä—Ö–∏–≤–æ–º</div>
                </div>
              </button>
            </div>

            <!-- Single Upload Method -->
            @if (uploadMethod === 'single') {
            <div class="single-upload-section">
              <div class="documents-checklist">
                <div class="checklist-header">
                  <h3>–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h3>
                  <div class="checklist-progress">
                    <span class="progress-text">
                      {{ getUploadedRequiredDocumentsCount() }} –∏–∑ {{ getRequiredDocuments().length }}
                    </span>
                    <div class="progress-circle">
                      <svg width="40" height="40">
                        <circle cx="20" cy="20" r="18" stroke-width="3" fill="transparent" class="progress-bg" />
                        <circle cx="20" cy="20" r="18" stroke-width="3" fill="transparent"
                          [style.stroke-dasharray]="2 * 3.14 * 18"
                          [style.stroke-dashoffset]="2 * 3.14 * 18 * (1 - getUploadedRequiredDocumentsCount() / getRequiredDocuments().length)"
                          class="progress-fill" />
                      </svg>
                      <span class="progress-percent">
                        {{ getUploadedRequiredPercentage() }}%
                      </span>
                    </div>
                  </div>
                </div>

                <div class="checklist-items">
                  @for (doc of getRequiredDocuments(); track doc.id) {
                  <div class="checklist-item" [class.uploaded]="isDocumentUploaded(doc.id)">
                    <div class="item-checkbox">
                      <input type="checkbox" [id]="'doc-' + doc.id" [checked]="isDocumentUploaded(doc.id)"
                        (change)="toggleDocumentUpload(doc.id, $event)">
                      <label [for]="'doc-' + doc.id" class="checkbox-visual">
                        <svg viewBox="0 0 20 20">
                          <path
                            d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" />
                        </svg>
                      </label>
                    </div>

                    <div class="item-content">
                      <div class="item-header">
                        <div class="item-title">
                          {{ doc.name }}
                          @if (isDocumentUploaded(doc.id)) {
                          <span class="uploaded-badge">–ó–∞–≥—Ä—É–∂–µ–Ω–æ</span>
                          }
                        </div>
                        <div class="item-actions">
                          @if (isDocumentUploaded(doc.id)) {
                          <button class="action-btn view" (click)="viewDocument(doc.id)">
                            <svg viewBox="0 0 24 24">
                              <path
                                d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                            </svg>
                          </button>
                          <button class="action-btn replace" (click)="replaceDocument(doc.id)">
                            <svg viewBox="0 0 24 24">
                              <path
                                d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" />
                            </svg>
                          </button>
                          <button class="action-btn delete" (click)="removeDocument(doc.id)">
                            <svg viewBox="0 0 24 24">
                              <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
                            </svg>
                          </button>
                          } @else {
                          <label class="upload-file-btn">
                            <input type="file" (change)="onFileSelected($event, doc.id)"
                              accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" hidden>
                            <svg viewBox="0 0 24 24">
                              <path
                                d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" />
                            </svg>
                            –ó–∞–≥—Ä—É–∑–∏—Ç—å
                          </label>
                          }
                        </div>
                      </div>

                      @if (isDocumentUploaded(doc.id) && getUploadedDocument(doc.id)) {
                      <div class="item-preview">
                        <div class="preview-info">
                          <div class="file-name">{{ getUploadedDocument(doc.id)?.fileName }}</div>
                          <div class="file-meta">
                            <span class="file-size">{{ formatFileSize(getUploadedDocument(doc.id)!.fileSize) }}</span>
                            <span class="file-type">{{ getFileType(getUploadedDocument(doc.id)!.fileType) }}</span>
                          </div>
                        </div>
                      </div>
                      }
                    </div>
                  </div>
                  }
                </div>
              </div>

              <!-- Optional Documents -->
              @if (getOptionalDocuments().length > 0) {
              <div class="optional-documents">
                <div class="optional-header">
                  <h4>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</h4>
                  <div class="optional-count">
                    {{ getUploadedOptionalDocumentsCount() }} / {{ getOptionalDocuments().length }}
                  </div>
                </div>

                <div class="optional-grid">
                  @for (doc of getOptionalDocuments(); track doc.id) {
                  <div class="optional-card" [class.uploaded]="isDocumentUploaded(doc.id)">
                    <div class="optional-content">
                      <div class="optional-icon">üìé</div>
                      <div class="optional-info">
                        <div class="optional-name">{{ doc.name }}</div>
                        <div class="optional-status">
                          @if (isDocumentUploaded(doc.id)) {
                          <span class="status-uploaded">–ó–∞–≥—Ä—É–∂–µ–Ω–æ</span>
                          } @else {
                          <span class="status-optional">–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ</span>
                          }
                        </div>
                      </div>
                    </div>

                    <label class="optional-upload-btn">
                      <input type="file" (change)="onFileSelected($event, doc.id)"
                        accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" hidden>
                      @if (isDocumentUploaded(doc.id)) {
                      <svg viewBox="0 0 24 24">
                        <path
                          d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" />
                      </svg>
                      –ó–∞–º–µ–Ω–∏—Ç—å
                      } @else {
                      <svg viewBox="0 0 24 24">
                        <path
                          d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" />
                      </svg>
                      –ó–∞–≥—Ä—É–∑–∏—Ç—å
                      }
                    </label>
                  </div>
                  }
                </div>
              </div>
              }
            </div>
            }

            <!-- Cloud Link Method -->
            @if (uploadMethod === 'cloud') {
            <div class="cloud-upload-section">
              <div class="cloud-upload-card">
                <div class="cloud-icon">‚òÅÔ∏è</div>
                <div class="cloud-content">
                  <h3>–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –æ–±–ª–∞—á–Ω–æ–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â—É</h3>
                  <p class="cloud-description">
                    –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –≤ –≤–∞—à–µ–º –æ–±–ª–∞—á–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø –ø–æ —Å—Å—ã–ª–∫–µ
                  </p>

                  <div class="cloud-providers">
                    <div class="providers-list">
                      <button class="provider-btn" [class.active]="selectedProvider === 'yandex'"
                        (click)="selectedProvider = 'yandex'">
                        <div class="provider-icon">–Ø</div>
                        <span>–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫</span>
                      </button>
                      <button class="provider-btn" [class.active]="selectedProvider === 'google'"
                        (click)="selectedProvider = 'google'">
                        <div class="provider-icon">G</div>
                        <span>Google Drive</span>
                      </button>
                      <button class="provider-btn" [class.active]="selectedProvider === 'dropbox'"
                        (click)="selectedProvider = 'dropbox'">
                        <div class="provider-icon">D</div>
                        <span>Dropbox</span>
                      </button>
                      <button class="provider-btn" [class.active]="selectedProvider === 'other'"
                        (click)="selectedProvider = 'other'">
                        <div class="provider-icon">+</div>
                        <span>–î—Ä—É–≥–æ–µ</span>
                      </button>
                    </div>
                  </div>

                  <div class="cloud-link-input">
                    <input type="url" [(ngModel)]="cloudLink" placeholder="https://disk.yandex.ru/d/..."
                      class="modern-input">
                    <button class="btn-gradient" (click)="validateCloudLink()">
                      –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø
                    </button>
                  </div>

                  <div class="cloud-tips">
                    <div class="tip">
                      <div class="tip-icon">üîó</div>
                      <div class="tip-text">–°–æ–∑–¥–∞–π—Ç–µ —Å—Å—ã–ª–∫—É —Å –¥–æ—Å—Ç—É–ø–æ–º –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä</div>
                    </div>
                    <div class="tip">
                      <div class="tip-icon">üìÅ</div>
                      <div class="tip-text">–ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –æ–¥–Ω—É –ø–∞–ø–∫—É</div>
                    </div>
                    <div class="tip">
                      <div class="tip-icon">üîí</div>
                      <div class="tip-text">–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            }

            <!-- Archive Method -->
            @if (uploadMethod === 'archive') {
            <div class="archive-upload-section">
              <div class="archive-upload-card">
                <div class="archive-icon">üóúÔ∏è</div>
                <div class="archive-content">
                  <h3>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—Ä—Ö–∏–≤ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏</h3>
                  <p class="archive-description">
                    –°–æ–∑–¥–∞–π—Ç–µ ZIP-–∞—Ä—Ö–∏–≤ —Å–æ –≤—Å–µ–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –µ–≥–æ –æ–¥–Ω–∏–º —Ñ–∞–π–ª–æ–º
                  </p>

                  <div class="archive-dropzone" [class.active]="isDragOver" (dragover)="onDragOver($event)"
                    (dragleave)="onDragLeave($event)" (drop)="onArchiveDrop($event)">
                    <div class="dropzone-content">
                      <svg viewBox="0 0 24 24" class="dropzone-icon">
                        <path
                          d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" />
                      </svg>
                      <p class="dropzone-text">
                        –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∞—Ä—Ö–∏–≤ —Å—é–¥–∞ –∏–ª–∏ <span class="browse-link">–≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª</span>
                      </p>
                      <p class="dropzone-hint">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: ZIP, RAR (–º–∞–∫—Å. 50 –ú–ë)</p>
                    </div>
                    <input type="file" #archiveInput (change)="onArchiveSelected($event)" accept=".zip,.rar" hidden>
                  </div>

                  @if (archiveFile) {
                  <div class="archive-preview">
                    <div class="preview-header">
                      <div class="preview-info">
                        <div class="file-name">{{ archiveFile.name }}</div>
                        <div class="file-meta">
                          <span class="file-size">{{ formatFileSize(archiveFile.size) }}</span>
                          <span class="file-type">ZIP –∞—Ä—Ö–∏–≤</span>
                        </div>
                      </div>
                      <button class="remove-archive" (click)="removeArchive()">
                        <svg viewBox="0 0 24 24">
                          <path
                            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                        </svg>
                      </button>
                    </div>

                    <div class="archive-contents">
                      <div class="contents-header">
                        <h4>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∞—Ä—Ö–∏–≤–∞:</h4>
                        <div class="contents-count">{{ getArchiveFilesCount() }} —Ñ–∞–π–ª–æ–≤</div>
                      </div>
                      <div class="contents-list">
                        @for (file of getArchiveFiles(); track file.name) {
                        <div class="archive-file">
                          <span class="file-icon">üìÑ</span>
                          <span class="file-name">{{ file.name }}</span>
                          <span class="file-size">{{ formatFileSize(file.size) }}</span>
                        </div>
                        }
                      </div>
                    </div>
                  </div>
                  }
                </div>
              </div>
            </div>
            }
          </div>

          <!-- Upload Summary -->
          <div class="upload-summary">
            <div class="summary-card">
              <div class="summary-header">
                <h3>–°–≤–æ–¥–∫–∞ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º</h3>
                <div class="summary-status" [class.complete]="validateDocumentsStep()">
                  @if (validateDocumentsStep()) {
                  <span class="status-icon">‚úì</span>
                  –ì–æ—Ç–æ–≤–æ
                  } @else {
                  <span class="status-icon">!</span>
                  –¢—Ä–µ–±—É—é—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç—ã
                  }
                </div>
              </div>

              <div class="summary-stats">
                <div class="stat">
                  <div class="stat-value">{{ getUploadedRequiredDocumentsCount() }}</div>
                  <div class="stat-label">–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ</div>
                </div>
                <div class="stat">
                  <div class="stat-value">{{ getUploadedOptionalDocumentsCount() }}</div>
                  <div class="stat-label">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ</div>
                </div>
                <div class="stat">
                  <div class="stat-value">{{ uploadedDocuments.length }}</div>
                  <div class="stat-label">–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤</div>
                </div>
                <div class="stat">
                  <div class="stat-value">{{ formatFileSize(getTotalUploadSize()) }}</div>
                  <div class="stat-label">–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä</div>
                </div>
              </div>

              <div class="summary-actions">
                <button class="btn-outline" (click)="downloadChecklist()">
                  <svg viewBox="0 0 24 24">
                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" />
                  </svg>
                  –°–∫–∞—á–∞—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
                </button>
              </div>
            </div>
          </div>
        </div>
        }
      </div>
    </main>

    <!-- Navigation Footer -->
    <footer class="registration-footer">
      <div class="footer-left">
        @if (currentStep > 1) {
        <button class="btn-outline" (click)="prevStep()">
          <svg viewBox="0 0 24 24">
            <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z" />
          </svg>
          –ù–∞–∑–∞–¥
        </button>
        }
      </div>

      <div class="footer-center">
        <div class="step-guide">
          <div class="guide-text">{{ getStepGuideText() }}</div>
          <div class="guide-hint" *ngIf="getStepHint()">
            üí° {{ getStepHint() }}
          </div>
        </div>
      </div>

      <div class="footer-right">
        @if (currentStep < totalSteps) { <button class="btn-gradient" (click)="nextStep()">
          <!-- [disabled]="!validateCurrentStep()" -->
          –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
          <svg viewBox="0 0 24 24">
            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" />
          </svg>
          </button>
          } @else {
          <button class="btn-success" (click)="submitBusinessAccount()"
            [disabled]="isSubmitting || !validateDocumentsStep()">
            <span class="btn-content">
              @if (!isSubmitting) {
              <span>–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é</span>
              } @else {
              <span>–û—Ç–ø—Ä–∞–≤–∫–∞...</span>
              <span class="spinner"></span>
              }
            </span>
          </button>
          }
      </div>
    </footer>
  </div>
  }
</div>