<div class="multi-cart-tabs">
    <!-- –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∑–∏–Ω -->
    <div class="tab" *ngFor="let basket of baskets; let i = index" [class.active]="activeBasket?.id === basket.id"
        (click)="selectBasket(basket)">
        {{ basket.name }}
        <span class="count">{{ basket.productCount || 0 }}</span>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∫–æ—Ä–∑–∏–Ω—ã -->
    <button class="add-tab" (click)="openCreatePopup()">
        + –ù–æ–≤–∞—è –∫–æ—Ä–∑–∏–Ω–∞
    </button>
</div>


<!-- Popup –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã -->
<div class="popup-backdrop" *ngIf="isPopupOpen" (click)="closePopup()"></div>

<div class="popup" *ngIf="isPopupOpen">
    <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ—Ä–∑–∏–Ω—É</h3>
    <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã" [(ngModel)]="newBasketName"
        (keyup.enter)="confirmCreateBasket()" />
    <div class="popup-actions">
        <button class="cancel" (click)="closePopup()">–û—Ç–º–µ–Ω–∞</button>
        <button class="confirm" (click)="confirmCreateBasket()">–°–æ–∑–¥–∞—Ç—å</button>
    </div>
</div>


<div class="cart-layout">

    <!-- –õ–µ–≤—ã–π –±–ª–æ–∫: —Ç–æ–≤–∞—Ä—ã -->
    <div style="flex: 2; display: flex;
    gap: 20px;">
        <div class="products">

            <div class="section">
                <div class="cart-container">
                    <h2>–¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ</h2>

                    <ng-container *ngIf="selectedProducts.size > 0">
                        <div class="flex-row">
                            <app-select-cart-button></app-select-cart-button>

                            <button class="icon-btn remove" title="–£–¥–∞–ª–∏—Ç—å">
                                <!-- –ò–∫–æ–Ω–∫–∞ –º—É—Å–æ—Ä–Ω–æ–π –∫–æ—Ä–∑–∏–Ω—ã -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                    viewBox="0 0 24 24">
                                    <path
                                        d="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6Z" />
                                </svg>
                            </button>
                        </div>
                    </ng-container>
                </div>


                <app-product [product]="p" *ngFor="let p of activeBasket.products" class="product"
                    [selected]="isSelected(p.id)" (selectionChange)="onProductSelected($event)"></app-product>

                <div *ngIf="!activeBasket?.products?.length" class="empty-basket">
                    <img src="https://avatars.mds.yandex.net/i?id=20b7d61e6c1a1ca1dc503ccbad50e2b8-5695679-images-thumbs&n=13" alt="–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞" />
                    <h3>–ö–æ—Ä–∑–∏–Ω–∞ –∂–¥–µ—Ç –≤–∞—à–∏—Ö –ø–æ–∫—É–ø–æ–∫ üõçÔ∏è</h3>
                    <p>–ó–∞–≥–ª—è–Ω–∏—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥ ‚Äî –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –Ω–∞–π–¥–µ—Ç—Å—è —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ!</p>
                    <button class="browse-btn" (click)="router.navigate(['/'])">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã</button>
                </div>



                <div class="cart-footer">
                    <button type="button" class="continue-btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</button>
                </div>
            </div>

            <div class="section">
                <!-- –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ -->
                <app-order-form></app-order-form>
            </div>

        </div>

        <!-- –ü—Ä–∞–≤—ã–π –±–ª–æ–∫: –∏—Ç–æ–≥–∏ -->
        <app-summary></app-summary>


    </div>